# ITFY E-Voting Backend Configuration
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!

# ================================
# Server Configuration
# ================================
NODE_ENV=development
PORT=3000
# Comma-separated list of allowed origins for CORS (use * for development only)
CORS_ORIGIN=http://localhost:3001,http://localhost:3000

# ================================
# Database Configuration
# ================================
# MongoDB connection string (use replica set for production)
MONGODB_URI=mongodb://localhost:27017/itfy-evoting
# For Atlas: mongodb+srv://user:password@cluster.mongodb.net/dbname?retryWrites=true&w=majority
DB_MAX_RETRIES=5
DB_RETRY_DELAY_MS=5000

# ================================
# Redis/Cache Configuration
# ================================
# Redis URL (required for production clustering and rate limiting)
REDIS_URL=redis://localhost:6379
# For Redis Cloud/ElastiCache: redis://user:password@host:port
REDIS_MAX_RETRIES=5
REDIS_RETRY_DELAY_MS=2000
# Set to 'true' to use in-memory cache instead of Redis (development only)
USE_IN_MEMORY_CACHE=false

# ================================
# JWT Configuration
# ================================
# Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('base64'))"
JWT_SECRET=your-super-secure-jwt-secret-change-this
JWT_REFRESH_SECRET=your-super-secure-refresh-secret-change-this
JWT_EXPIRATION=30m
JWT_REFRESH_EXPIRATION=7d

# ================================
# Email Configuration
# ================================
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-app-specific-password
EMAIL_FROM=noreply@yourapp.com

# ================================
# Frontend Configuration
# ================================
FRONTEND_URL=http://localhost:3001

# ================================
# Payment Configuration (Paystack)
# ================================
PAYSTACK_PUBLIC_KEY=pk_test_xxxxxxxxxxxx
PAYSTACK_SECRET_KEY=sk_test_xxxxxxxxxxxx
PAYSTACK_CALLBACK_URL=http://localhost:3001/payment/callback
# API request timeout in milliseconds
PAYSTACK_TIMEOUT_MS=30000

# ================================
# File Upload Configuration
# ================================
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760

# ================================
# Logging & Monitoring
# ================================
LOG_LEVEL=info
LOG_DIR=./logs
# Sentry DSN for error tracking (optional, production recommended)
SENTRY_DSN=
# Sample rate for Sentry traces (0.0 to 1.0)
SENTRY_TRACES_RATE=0.1

# ================================
# PM2 Process Management
# ================================
# Number of cluster instances ('max' for all cores, or specific number)
PM2_INSTANCES=max
# Memory limit before automatic restart
PM2_MAX_MEMORY=1G

# ================================
# Security Configuration
# ================================
# Enable/disable rate limiting (disable for development if needed)
RATE_LIMIT_ENABLED=true
# Global rate limit per IP (requests per 15 minutes)
RATE_LIMIT_MAX_REQUESTS=100

# ================================
# Console Configuration
# ================================
CONSOLE_SETUP_COMPLETE=true