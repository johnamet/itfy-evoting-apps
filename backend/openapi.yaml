openapi: 3.0.3
info:
  title: ITFY E-Voting Platform API
  description: |
    # ITFY E-Voting Platform Backend API
    
    Welcome to the comprehensive API documentation for the ITFY E-Voting platform.
    This platform enables event organizers to create and manage voting events with 
    candidates, categories, and secure payment-based voting.
    
    ## Features
    - **Authentication & Authorization**: Secure JWT-based authentication with role-based access control
    - **Event Management**: Create, manage, and publish voting events
    - **Category Management**: Organize candidates into voting categories
    - **Candidate Management**: Register and manage candidates with profiles
    - **Voting System**: Purchase vote bundles and cast votes securely
    - **Payment Integration**: Paystack payment gateway integration
    - **Forms & Submissions**: Dynamic nomination forms with approval workflows
    - **Analytics**: Comprehensive voting analytics and reporting
    
    ## Authentication
    Most endpoints require authentication via JWT tokens. Include the token in the Authorization header:
    ```
    Authorization: Bearer <your_token>
    ```
    
    ## User Roles
    - **super_admin**: Full system access
    - **admin**: Administrative access to events and users
    - **organiser**: Can create and manage events
    - **moderator**: Can view and moderate content
    
    ## Rate Limiting
    API requests are rate-limited to prevent abuse:
    - Authentication endpoints: 3-10 requests per 15-60 minutes
    - General endpoints: Standard rate limits apply
    
    ## Pagination
    List endpoints support pagination with the following query parameters:
    - `page`: Page number (default: 1)
    - `limit`: Items per page (default: 10, max: 100)
    
  version: 1.0.0
  contact:
    name: ITFY E-Voting Support
    email: support@itfy-evoting.com
  license:
    name: ISC

servers:
  - url: http://localhost:3000/api/v1
    description: Development server
  - url: https://api.itfy-evoting.com/api/v1
    description: Production server

tags:
  - name: Health
    description: System health and monitoring
  - name: Authentication
    description: User and candidate authentication endpoints
  - name: Users
    description: User profile and management endpoints
  - name: Events
    description: Event management and lifecycle endpoints
  - name: Categories
    description: Voting category management
  - name: Candidates
    description: Candidate registration and management
  - name: Votes
    description: Vote casting and results
  - name: Bundles
    description: Vote bundle packages
  - name: Coupons
    description: Discount coupon management
  - name: Payments
    description: Payment processing and verification
  - name: Forms
    description: Dynamic form management
  - name: Submissions
    description: Form submission handling
  - name: Slides
    description: Promotional slide management
  - name: Notifications
    description: User notification management

components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token obtained from login endpoint
    CandidateAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT token for authenticated candidates

  schemas:
    # ==================
    # Common Schemas
    # ==================
    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: "An error occurred"
        error:
          type: string
          example: "Detailed error message"

    SuccessResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Operation successful"
        data:
          type: object

    PaginationMeta:
      type: object
      properties:
        currentPage:
          type: integer
          example: 1
        totalPages:
          type: integer
          example: 10
        totalItems:
          type: integer
          example: 95
        itemsPerPage:
          type: integer
          example: 10
        hasNextPage:
          type: boolean
          example: true
        hasPrevPage:
          type: boolean
          example: false

    ObjectId:
      type: string
      pattern: '^[a-fA-F0-9]{24}$'
      example: "507f1f77bcf86cd799439011"

    # ==================
    # User Schemas
    # ==================
    User:
      type: object
      properties:
        _id:
          $ref: '#/components/schemas/ObjectId'
        name:
          type: string
          example: "John Doe"
        email:
          type: string
          format: email
          example: "user@example.com"
        role:
          type: string
          enum: [super_admin, admin, organiser, moderator]
          example: "admin"
        permissions:
          type: array
          items:
            type: string
            enum: [read, write, update, delete, super]
          example: ["read", "write"]
        email_verified:
          type: boolean
          example: true
        email_verified_at:
          type: string
          format: date-time
          nullable: true
        last_login:
          type: string
          format: date-time
          nullable: true
        bio:
          type: string
          nullable: true
        photo_url:
          type: string
          nullable: true
        status:
          type: string
          enum: [active, inactive, suspended, deleted]
          example: "active"
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    # ==================
    # Auth Request Schemas
    # ==================
    RegisterRequest:
      type: object
      required:
        - name
        - email
        - password
      properties:
        name:
          type: string
          minLength: 2
          example: "John Doe"
        email:
          type: string
          format: email
          example: "user@example.com"
        password:
          type: string
          format: password
          minLength: 8
          example: "SecurePass123!"
        role:
          type: string
          enum: [admin, organiser, moderator]
          example: "organiser"

    LoginRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
          example: "user@example.com"
        password:
          type: string
          format: password
          example: "SecurePass123!"

    LoginResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        message:
          type: string
          example: "Login successful"
        data:
          type: object
          properties:
            user:
              $ref: '#/components/schemas/User'
            tokens:
              type: object
              properties:
                accessToken:
                  type: string
                  example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                refreshToken:
                  type: string
                  example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                expiresIn:
                  type: string
                  example: "15m"

    RefreshTokenRequest:
      type: object
      required:
        - refreshToken
      properties:
        refreshToken:
          type: string
          example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."

    ForgotPasswordRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
          example: "user@example.com"

    ResetPasswordRequest:
      type: object
      required:
        - token
        - password
      properties:
        token:
          type: string
          example: "reset-token-here"
        password:
          type: string
          format: password
          minLength: 8
          example: "NewSecurePass123!"

    ChangePasswordRequest:
      type: object
      required:
        - currentPassword
        - newPassword
      properties:
        currentPassword:
          type: string
          format: password
          example: "CurrentPass123!"
        newPassword:
          type: string
          format: password
          minLength: 8
          example: "NewSecurePass123!"

    VerifyEmailRequest:
      type: object
      required:
        - token
      properties:
        token:
          type: string
          example: "verification-token-here"

    ResendVerificationRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
          example: "user@example.com"

    # ==================
    # Candidate Auth Schemas
    # ==================
    CandidateLoginRequest:
      type: object
      required:
        - identifier
        - password
      properties:
        identifier:
          type: string
          description: Candidate code or email
          example: "CAN001"
        password:
          type: string
          format: password
          example: "CandidatePass123!"

    # ==================
    # Event Schemas
    # ==================
    EventLocation:
      type: object
      properties:
        name:
          type: string
          example: "Accra International Conference Centre"
        address:
          type: string
          example: "Castle Road, Ridge"
        city:
          type: string
          example: "Accra"
        country:
          type: string
          example: "Ghana"
        coordinates:
          type: object
          properties:
            lat:
              type: number
              example: 5.5560
            lng:
              type: number
              example: -0.1969

    Event:
      type: object
      properties:
        _id:
          $ref: '#/components/schemas/ObjectId'
        name:
          type: string
          example: "Ghana Music Awards 2025"
        description:
          type: string
          example: "Annual music awards celebrating Ghanaian artists"
        slug:
          type: string
          example: "ghana-music-awards-2025"
        location:
          $ref: '#/components/schemas/EventLocation'
        start_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time
        event_type:
          type: string
          enum: [conference, workshop, seminar, networking, webinar, hybrid, other]
          example: "conference"
        visibility:
          type: string
          enum: [public, private, unlisted]
          example: "public"
        status:
          type: string
          enum: [active, upcoming, archived, cancelled, deleted, pending]
          example: "active"
        is_published:
          type: boolean
          example: true
        is_featured:
          type: boolean
          example: false
        logo_url:
          type: string
          nullable: true
        banner_url:
          type: string
          nullable: true
        gallery:
          type: array
          items:
            type: string
        speakers:
          type: array
          items:
            type: object
        sponsors:
          type: array
          items:
            type: object
        currency:
          type: string
          enum: [USD, EUR, GBP, GHS, NGN]
          example: "GHS"
        total_votes:
          type: integer
          example: 15000
        total_revenue:
          type: number
          example: 50000.00
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CreateEventRequest:
      type: object
      required:
        - name
        - description
        - location
        - start_date
        - end_date
      properties:
        name:
          type: string
          minLength: 3
          example: "Ghana Music Awards 2025"
        description:
          type: string
          minLength: 10
          example: "Annual music awards celebrating Ghanaian artists"
        location:
          $ref: '#/components/schemas/EventLocation'
        start_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time
        event_type:
          type: string
          enum: [conference, workshop, seminar, networking, webinar, hybrid, other]
        visibility:
          type: string
          enum: [public, private, unlisted]
          default: public
        currency:
          type: string
          enum: [USD, EUR, GBP, GHS, NGN]
          default: GHS

    UpdateEventRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        location:
          $ref: '#/components/schemas/EventLocation'
        start_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time
        event_type:
          type: string
        visibility:
          type: string
        logo_url:
          type: string
        banner_url:
          type: string

    # ==================
    # Category Schemas
    # ==================
    Category:
      type: object
      properties:
        _id:
          $ref: '#/components/schemas/ObjectId'
        name:
          type: string
          description: Category name
        description:
          type: string
          description: Category description
        icon:
          type: string
          nullable: true
          description: Icon URL
        slug:
          type: string
          description: URL-friendly slug
        candidates:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
          description: Array of candidate IDs
        status:
          type: string
          enum: [active, inactive, deleted, archived, closed]
          description: Category status
        event:
          $ref: '#/components/schemas/ObjectId'
        is_voting_open:
          type: boolean
          description: Whether voting is currently open
        voting_start_date:
          type: string
          format: date-time
          nullable: true
          description: When voting starts
        voting_deadline:
          type: string
          format: date-time
          nullable: true
          description: Voting deadline
        total_votes:
          type: integer
          minimum: 0
          description: Total votes cast
        min_candidates:
          type: integer
          minimum: 1
          default: 2
          description: Minimum candidates required
        max_candidates:
          type: integer
          nullable: true
          description: Maximum candidates allowed
        display_order:
          type: integer
          default: 0
          description: Display order position
        is_featured:
          type: boolean
          default: false
          description: Whether category is featured
        voting_rules:
          type: string
          nullable: true
          description: Voting rules text
        allow_write_in:
          type: boolean
          default: false
          description: Allow write-in candidates
        require_authentication:
          type: boolean
          default: true
          description: Require authentication to vote
        results_visibility:
          type: string
          enum: [public, authenticated, admin_only]
          default: public
          description: Who can see results
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CreateCategoryRequest:
      type: object
      required:
        - name
        - event
      properties:
        name:
          type: string
          description: Category name
        description:
          type: string
        icon:
          type: string
        event:
          $ref: '#/components/schemas/ObjectId'
        voting_start_date:
          type: string
          format: date-time
        voting_deadline:
          type: string
          format: date-time
        min_candidates:
          type: integer
          minimum: 1
        max_candidates:
          type: integer
        voting_rules:
          type: string
        allow_write_in:
          type: boolean
        require_authentication:
          type: boolean
        results_visibility:
          type: string
          enum: [public, authenticated, admin_only]

    UpdateCategoryRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        icon:
          type: string
        voting_start_date:
          type: string
          format: date-time
        voting_deadline:
          type: string
          format: date-time
        min_candidates:
          type: integer
        max_candidates:
          type: integer
        voting_rules:
          type: string
        allow_write_in:
          type: boolean
        require_authentication:
          type: boolean
        results_visibility:
          type: string
          enum: [public, authenticated, admin_only]

    # ==================
    # Candidate Schemas
    # ==================
    CandidateProject:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        url:
          type: string
        image:
          type: string
        date:
          type: string
          format: date-time

    CandidateEducation:
      type: object
      properties:
        institution:
          type: string
        qualification:
          type: string
        field:
          type: string
        start_date:
          type: string
          format: date-time
        end_date:
          type: string
          format: date-time

    CandidateSocialLinks:
      type: object
      properties:
        facebook:
          type: string
        twitter:
          type: string
        instagram:
          type: string
        linkedin:
          type: string
        youtube:
          type: string
        website:
          type: string
        tiktok:
          type: string

    Candidate:
      type: object
      properties:
        _id:
          $ref: '#/components/schemas/ObjectId'
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
        candidate_code:
          type: string
          description: Unique candidate code
        phone_number:
          type: string
        slug:
          type: string
        bio:
          type: string
        profile_image:
          type: string
          nullable: true
        cover_image:
          type: string
          nullable: true
        gallery:
          type: array
          items:
            type: string
        video_url:
          type: string
        projects:
          type: array
          items:
            $ref: '#/components/schemas/CandidateProject'
        skills:
          type: array
          items:
            type: string
        education:
          type: array
          items:
            $ref: '#/components/schemas/CandidateEducation'
        social_links:
          $ref: '#/components/schemas/CandidateSocialLinks'
        status:
          type: string
          enum: [pending, approved, rejected, profile_update_pending, pending_profile_completion]
        event:
          $ref: '#/components/schemas/ObjectId'
        categories:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
        vote_count:
          type: integer
          minimum: 0
        is_featured:
          type: boolean
        is_published:
          type: boolean
        display_order:
          type: integer
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CreateCandidateRequest:
      type: object
      required:
        - first_name
        - last_name
        - email
        - event
      properties:
        first_name:
          type: string
        last_name:
          type: string
        email:
          type: string
          format: email
        phone_number:
          type: string
        bio:
          type: string
        profile_image:
          type: string
        event:
          $ref: '#/components/schemas/ObjectId'
        categories:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'

    UpdateCandidateRequest:
      type: object
      properties:
        first_name:
          type: string
        last_name:
          type: string
        phone_number:
          type: string
        bio:
          type: string
        profile_image:
          type: string
        cover_image:
          type: string
        gallery:
          type: array
          items:
            type: string
        video_url:
          type: string
        projects:
          type: array
          items:
            $ref: '#/components/schemas/CandidateProject'
        skills:
          type: array
          items:
            type: string
        education:
          type: array
          items:
            $ref: '#/components/schemas/CandidateEducation'
        social_links:
          $ref: '#/components/schemas/CandidateSocialLinks'

    CandidateProfileUpdateRequest:
      type: object
      description: Schema for candidate self-profile update
      properties:
        bio:
          type: string
        phone_number:
          type: string
        profile_image:
          type: string
        cover_image:
          type: string
        gallery:
          type: array
          items:
            type: string
        video_url:
          type: string
        projects:
          type: array
          items:
            $ref: '#/components/schemas/CandidateProject'
        skills:
          type: array
          items:
            type: string
        education:
          type: array
          items:
            $ref: '#/components/schemas/CandidateEducation'
        social_links:
          $ref: '#/components/schemas/CandidateSocialLinks'

    # ==================
    # Vote Schemas
    # ==================
    Vote:
      type: object
      properties:
        _id:
          $ref: '#/components/schemas/ObjectId'
        candidate:
          $ref: '#/components/schemas/ObjectId'
        category:
          $ref: '#/components/schemas/ObjectId'
        event:
          $ref: '#/components/schemas/ObjectId'
        payment:
          $ref: '#/components/schemas/ObjectId'
        vote_code:
          type: string
          description: Vote code used
        status:
          type: string
          enum: [active, refunded]
        ip_hash:
          type: string
          description: Hashed IP address
        user_agent:
          type: string
        cast_at:
          type: string
          format: date-time
        refunded_at:
          type: string
          format: date-time
          nullable: true
        refund_reason:
          type: string
          nullable: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CastVoteRequest:
      type: object
      required:
        - vote_code
        - candidate
        - category
      properties:
        vote_code:
          type: string
          description: Vote code from payment
        candidate:
          $ref: '#/components/schemas/ObjectId'
        category:
          $ref: '#/components/schemas/ObjectId'

    VoteEligibilityRequest:
      type: object
      required:
        - vote_code
        - category
      properties:
        vote_code:
          type: string
        category:
          $ref: '#/components/schemas/ObjectId'

    # ==================
    # Bundle Schemas
    # ==================
    Bundle:
      type: object
      properties:
        _id:
          $ref: '#/components/schemas/ObjectId'
        name:
          type: string
        description:
          type: string
        slug:
          type: string
        event:
          $ref: '#/components/schemas/ObjectId'
        categories:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
        vote_count:
          type: integer
          minimum: 1
          description: Number of votes in bundle
        price:
          type: number
          minimum: 0
        currency:
          type: string
          default: GHS
        discount_percentage:
          type: number
          minimum: 0
          maximum: 100
        original_price:
          type: number
        is_featured:
          type: boolean
        is_popular:
          type: boolean
        display_order:
          type: integer
        status:
          type: string
          enum: [active, inactive, archived]
        valid_from:
          type: string
          format: date-time
        valid_until:
          type: string
          format: date-time
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CreateBundleRequest:
      type: object
      required:
        - name
        - event
        - vote_count
        - price
      properties:
        name:
          type: string
        description:
          type: string
        event:
          $ref: '#/components/schemas/ObjectId'
        categories:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
        vote_count:
          type: integer
          minimum: 1
        price:
          type: number
          minimum: 0
        currency:
          type: string
        discount_percentage:
          type: number
        is_featured:
          type: boolean
        valid_from:
          type: string
          format: date-time
        valid_until:
          type: string
          format: date-time

    UpdateBundleRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        categories:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
        vote_count:
          type: integer
        price:
          type: number
        discount_percentage:
          type: number
        is_featured:
          type: boolean
        valid_from:
          type: string
          format: date-time
        valid_until:
          type: string
          format: date-time

    # ==================
    # Payment Schemas
    # ==================
    Payment:
      type: object
      properties:
        _id:
          $ref: '#/components/schemas/ObjectId'
        transaction_reference:
          type: string
          description: Internal transaction reference
        paystack_reference:
          type: string
          description: Paystack payment reference
        bundle:
          $ref: '#/components/schemas/ObjectId'
        event:
          $ref: '#/components/schemas/ObjectId'
        coupon:
          $ref: '#/components/schemas/ObjectId'
        vote_code:
          type: string
          description: Generated vote code
        votes_purchased:
          type: integer
          minimum: 1
        votes_cast:
          type: integer
          minimum: 0
        votes_remaining:
          type: integer
          minimum: 0
        amount_paid:
          type: number
          minimum: 0
        original_amount:
          type: number
        discount_amount:
          type: number
        currency:
          type: string
        voter_email:
          type: string
          format: email
        voter_phone:
          type: string
        voter_name:
          type: string
        status:
          type: string
          enum: [pending, completed, failed, refunded]
        payment_method:
          type: string
          enum: [card, bank_transfer, ussd, mobile_money, qr]
        paid_at:
          type: string
          format: date-time
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    InitializePaymentRequest:
      type: object
      required:
        - bundle
        - voter_email
      properties:
        bundle:
          $ref: '#/components/schemas/ObjectId'
        voter_email:
          type: string
          format: email
        voter_name:
          type: string
        voter_phone:
          type: string
        coupon_code:
          type: string
          description: Optional coupon code
        callback_url:
          type: string
          description: URL to redirect after payment

    InitializePaymentResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            authorization_url:
              type: string
              description: Paystack checkout URL
            access_code:
              type: string
            reference:
              type: string

    # ==================== Form Schemas ====================
    Form:
      type: object
      properties:
        _id:
          $ref: '#/components/schemas/ObjectId'
        name:
          type: string
          description: Form name
        description:
          type: string
          description: Form description
        slug:
          type: string
          description: URL-friendly identifier
        form_type:
          type: string
          enum: [nomination, registration, survey, feedback]
          description: Type of form
        event:
          $ref: '#/components/schemas/ObjectId'
        categories:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
          description: Categories this form applies to
        fields:
          type: array
          items:
            $ref: '#/components/schemas/FormField'
          description: Form field definitions
        settings:
          $ref: '#/components/schemas/FormSettings'
        status:
          type: string
          enum: [draft, active, closed, archived]
          default: draft
        submission_count:
          type: integer
          description: Total submissions received
        candidate_field_mapping:
          type: object
          description: Mapping of form fields to candidate fields
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    FormField:
      type: object
      required:
        - field_id
        - label
        - field_type
      properties:
        field_id:
          type: string
          description: Unique field identifier
        label:
          type: string
          description: Field label
        field_type:
          type: string
          enum: [text, email, phone, number, textarea, select, multi_select, checkbox, radio, date, time, datetime, file, image, url, rating, slider, color, location]
          description: Type of input field
        placeholder:
          type: string
        help_text:
          type: string
        default_value:
          description: Default value for the field
        options:
          type: array
          items:
            type: object
            properties:
              label:
                type: string
              value:
                type: string
          description: Options for select/radio/checkbox fields
        validation:
          type: object
          properties:
            required:
              type: boolean
              default: false
            min_length:
              type: integer
            max_length:
              type: integer
            min_value:
              type: number
            max_value:
              type: number
            pattern:
              type: string
              description: Regex pattern for validation
            custom_message:
              type: string
        conditional:
          type: object
          properties:
            show_if:
              type: object
              properties:
                field_id:
                  type: string
                operator:
                  type: string
                  enum: [equals, not_equals, contains, not_contains, in, not_in, exists]
                value:
                  description: Value to compare
          description: Conditional visibility rules
        order:
          type: integer
          description: Display order

    FormSettings:
      type: object
      properties:
        allow_anonymous:
          type: boolean
          default: false
        require_email_verification:
          type: boolean
          default: false
        submissions_per_user:
          type: integer
          description: Max submissions per user
        submissions_per_ip:
          type: integer
          description: Max submissions per IP
        opens_at:
          type: string
          format: date-time
        closes_at:
          type: string
          format: date-time
        confirmation_message:
          type: string
        redirect_url:
          type: string
        duplicate_detection:
          type: object
          properties:
            enabled:
              type: boolean
            method:
              type: string
              enum: [exact_match, fuzzy_match, field_similarity, email_match, phone_match]
            threshold:
              type: number
              description: Similarity threshold (0-100)
            fields:
              type: array
              items:
                type: string
              description: Fields to check for duplicates

    CreateFormRequest:
      type: object
      required:
        - name
        - form_type
        - event
        - fields
      properties:
        name:
          type: string
          minLength: 1
          maxLength: 200
        description:
          type: string
        form_type:
          type: string
          enum: [nomination, registration, survey, feedback]
        event:
          $ref: '#/components/schemas/ObjectId'
        categories:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
        fields:
          type: array
          items:
            $ref: '#/components/schemas/FormField'
          minItems: 1
        settings:
          $ref: '#/components/schemas/FormSettings'

    UpdateFormRequest:
      type: object
      minProperties: 1
      properties:
        name:
          type: string
        description:
          type: string
        categories:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
        fields:
          type: array
          items:
            $ref: '#/components/schemas/FormField'
        settings:
          $ref: '#/components/schemas/FormSettings'

    # ==================== Submission Schemas ====================
    Submission:
      type: object
      properties:
        _id:
          $ref: '#/components/schemas/ObjectId'
        form:
          oneOf:
            - $ref: '#/components/schemas/ObjectId'
            - $ref: '#/components/schemas/Form'
        event:
          $ref: '#/components/schemas/ObjectId'
        categories:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
        submission_data:
          type: object
          additionalProperties: true
          description: Form field values keyed by field_id
        normalized_data:
          type: object
          additionalProperties:
            type: string
          description: Normalized data for duplicate detection
        status:
          type: string
          enum: [pending, approved, rejected, duplicate, under_review]
          default: pending
        submitted_by:
          type: object
          properties:
            user_id:
              $ref: '#/components/schemas/ObjectId'
            name:
              type: string
            email:
              type: string
            phone:
              type: string
        ip_hash:
          type: string
          description: Hashed IP address
        user_agent:
          type: string
        session_id:
          type: string
        duplicate_check:
          type: object
          properties:
            is_duplicate:
              type: boolean
            similarity_score:
              type: number
              minimum: 0
              maximum: 100
            matched_submissions:
              type: array
              items:
                type: object
                properties:
                  submission_id:
                    $ref: '#/components/schemas/ObjectId'
                  similarity:
                    type: number
                  matched_fields:
                    type: array
                    items:
                      type: string
            checked_at:
              type: string
              format: date-time
        nominee_identifier:
          type: string
          description: Unique identifier for nominee across categories
        approval:
          type: object
          properties:
            reviewed_by:
              $ref: '#/components/schemas/ObjectId'
            reviewed_at:
              type: string
              format: date-time
            review_notes:
              type: string
            rejection_reason:
              type: string
        candidate:
          $ref: '#/components/schemas/ObjectId'
          description: Created candidate (if approved)
        attachments:
          type: array
          items:
            type: object
            properties:
              field_id:
                type: string
              filename:
                type: string
              url:
                type: string
              size:
                type: integer
              mime_type:
                type: string
              uploaded_at:
                type: string
                format: date-time
        submission_number:
          type: string
          description: Human-readable submission reference
        confirmation_sent:
          type: boolean
        confirmation_sent_at:
          type: string
          format: date-time
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CreateSubmissionRequest:
      type: object
      required:
        - form
        - submission_data
      properties:
        form:
          $ref: '#/components/schemas/ObjectId'
        categories:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
        submission_data:
          type: object
          additionalProperties: true
          description: Field values keyed by field_id
        submitted_by:
          type: object
          properties:
            name:
              type: string
            email:
              type: string
            phone:
              type: string

    UpdateSubmissionRequest:
      type: object
      minProperties: 1
      properties:
        submission_data:
          type: object
          additionalProperties: true
        categories:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
        status:
          type: string
          enum: [pending, under_review]

    ApproveSubmissionRequest:
      type: object
      properties:
        review_notes:
          type: string
        create_candidate:
          type: boolean
          default: true
          description: Whether to create a candidate from this submission
        candidate_data:
          type: object
          properties:
            name:
              type: string
            code:
              type: string
            category:
              $ref: '#/components/schemas/ObjectId'
          description: Override data for candidate creation

    RejectSubmissionRequest:
      type: object
      required:
        - rejection_reason
      properties:
        rejection_reason:
          type: string
          minLength: 1
        review_notes:
          type: string
        send_notification:
          type: boolean
          default: true

    ResolveDuplicateRequest:
      type: object
      required:
        - resolution
      properties:
        resolution:
          type: string
          enum: [keep, merge, reject]
          description: How to handle the duplicate
        merge_with:
          $ref: '#/components/schemas/ObjectId'
          description: Submission to merge with (if resolution is merge)
        notes:
          type: string

    FieldMappingRequest:
      type: object
      properties:
        name:
          type: string
          description: Field ID mapped to candidate name
        code:
          type: string
          description: Field ID mapped to candidate code
        bio:
          type: string
          description: Field ID mapped to candidate bio
        photo:
          type: string
          description: Field ID mapped to candidate photo
        custom_fields:
          type: object
          additionalProperties:
            type: string
          description: Additional custom field mappings

    # ==================== Coupon Schemas ====================
    Coupon:
      type: object
      properties:
        _id:
          $ref: '#/components/schemas/ObjectId'
        code:
          type: string
          description: Unique coupon code (uppercase)
        description:
          type: string
        event:
          $ref: '#/components/schemas/ObjectId'
        applicable_bundles:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
          description: Bundles this coupon can be applied to (empty = all)
        discount_type:
          type: string
          enum: [percentage, fixed]
        discount_value:
          type: number
          description: Discount amount (percentage or fixed value)
        max_discount_amount:
          type: number
          description: Maximum discount for percentage-based coupons
        min_purchase_amount:
          type: number
          default: 0
          description: Minimum purchase amount to apply coupon
        status:
          type: string
          enum: [active, inactive, expired]
          default: active
        max_total_uses:
          type: integer
          description: Maximum total redemptions
        max_uses_per_user:
          type: integer
          default: 1
          description: Maximum uses per user
        current_redemptions:
          type: integer
          default: 0
        validity_start:
          type: string
          format: date-time
        validity_end:
          type: string
          format: date-time
        is_public:
          type: boolean
          default: false
          description: Whether coupon is publicly visible
        terms_and_conditions:
          type: string
        metadata:
          type: object
          additionalProperties:
            type: string
        created_by:
          $ref: '#/components/schemas/ObjectId'
        updated_by:
          $ref: '#/components/schemas/ObjectId'
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CreateCouponRequest:
      type: object
      required:
        - code
        - event
        - discount_type
        - discount_value
      properties:
        code:
          type: string
          minLength: 3
          maxLength: 50
        description:
          type: string
        event:
          $ref: '#/components/schemas/ObjectId'
        applicable_bundles:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
        discount_type:
          type: string
          enum: [percentage, fixed]
        discount_value:
          type: number
          minimum: 0
        max_discount_amount:
          type: number
          minimum: 0
        min_purchase_amount:
          type: number
          minimum: 0
        max_total_uses:
          type: integer
          minimum: 1
        max_uses_per_user:
          type: integer
          minimum: 1
          default: 1
        validity_start:
          type: string
          format: date-time
        validity_end:
          type: string
          format: date-time
        is_public:
          type: boolean
          default: false
        terms_and_conditions:
          type: string

    UpdateCouponRequest:
      type: object
      minProperties: 1
      properties:
        description:
          type: string
        applicable_bundles:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
        discount_value:
          type: number
          minimum: 0
        max_discount_amount:
          type: number
        min_purchase_amount:
          type: number
        max_total_uses:
          type: integer
        max_uses_per_user:
          type: integer
        validity_start:
          type: string
          format: date-time
        validity_end:
          type: string
          format: date-time
        is_public:
          type: boolean
        terms_and_conditions:
          type: string

    ValidateCouponRequest:
      type: object
      required:
        - code
        - bundle
      properties:
        code:
          type: string
        bundle:
          $ref: '#/components/schemas/ObjectId'
        amount:
          type: number
          description: Purchase amount for validation

    ApplyCouponResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            coupon:
              $ref: '#/components/schemas/Coupon'
            original_amount:
              type: number
            discount_amount:
              type: number
            final_amount:
              type: number

    CouponStats:
      type: object
      properties:
        total_redemptions:
          type: integer
        total_discount_given:
          type: number
        unique_users:
          type: integer
        remaining_uses:
          type: integer

    # ==================== Slide Schemas ====================
    Slide:
      type: object
      properties:
        _id:
          $ref: '#/components/schemas/ObjectId'
        title:
          type: string
        subtitle:
          type: string
        description:
          type: string
        slide_type:
          type: string
          enum: [hero, banner, announcement, promotion]
          default: hero
        status:
          type: string
          enum: [active, inactive, draft, scheduled]
          default: draft
        event:
          $ref: '#/components/schemas/ObjectId'
          description: Associated event (optional)
        image:
          type: object
          required:
            - url
          properties:
            url:
              type: string
            alt:
              type: string
            public_id:
              type: string
        mobile_image:
          type: object
          properties:
            url:
              type: string
            alt:
              type: string
            public_id:
              type: string
        background_color:
          type: string
        text_color:
          type: string
          default: '#ffffff'
        overlay_opacity:
          type: integer
          minimum: 0
          maximum: 100
          default: 40
        button:
          type: object
          properties:
            text:
              type: string
            url:
              type: string
            style:
              type: string
              enum: [primary, secondary, outline, ghost, link]
            open_in_new_tab:
              type: boolean
        position:
          type: string
          enum: [top, middle, bottom]
          default: top
        order:
          type: integer
          default: 0
        animation:
          type: object
          properties:
            type:
              type: string
              enum: [fade, slide, zoom, none]
            duration:
              type: integer
            delay:
              type: integer
        validity_start:
          type: string
          format: date-time
        validity_end:
          type: string
          format: date-time
        target_audience:
          type: array
          items:
            type: string
            enum: [all, logged_in, guests, admins]
        analytics:
          type: object
          properties:
            views:
              type: integer
            clicks:
              type: integer
            click_through_rate:
              type: number
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CreateSlideRequest:
      type: object
      required:
        - title
        - image
      properties:
        title:
          type: string
          maxLength: 200
        subtitle:
          type: string
        description:
          type: string
        slide_type:
          type: string
          enum: [hero, banner, announcement, promotion]
        event:
          $ref: '#/components/schemas/ObjectId'
        image:
          type: object
          required:
            - url
          properties:
            url:
              type: string
            alt:
              type: string
        mobile_image:
          type: object
          properties:
            url:
              type: string
            alt:
              type: string
        background_color:
          type: string
        text_color:
          type: string
        overlay_opacity:
          type: integer
          minimum: 0
          maximum: 100
        button:
          type: object
          properties:
            text:
              type: string
            url:
              type: string
            style:
              type: string
              enum: [primary, secondary, outline, ghost, link]
            open_in_new_tab:
              type: boolean
        position:
          type: string
          enum: [top, middle, bottom]
        order:
          type: integer
        animation:
          type: object
          properties:
            type:
              type: string
              enum: [fade, slide, zoom, none]
            duration:
              type: integer
            delay:
              type: integer
        validity_start:
          type: string
          format: date-time
        validity_end:
          type: string
          format: date-time
        target_audience:
          type: array
          items:
            type: string
            enum: [all, logged_in, guests, admins]

    UpdateSlideRequest:
      type: object
      minProperties: 1
      properties:
        title:
          type: string
        subtitle:
          type: string
        description:
          type: string
        slide_type:
          type: string
          enum: [hero, banner, announcement, promotion]
        event:
          $ref: '#/components/schemas/ObjectId'
        image:
          type: object
          properties:
            url:
              type: string
            alt:
              type: string
        mobile_image:
          type: object
          properties:
            url:
              type: string
            alt:
              type: string
        background_color:
          type: string
        text_color:
          type: string
        overlay_opacity:
          type: integer
        button:
          type: object
          properties:
            text:
              type: string
            url:
              type: string
            style:
              type: string
            open_in_new_tab:
              type: boolean
        position:
          type: string
        order:
          type: integer
        animation:
          type: object
        validity_start:
          type: string
          format: date-time
        validity_end:
          type: string
          format: date-time
        target_audience:
          type: array
          items:
            type: string

    ReorderSlidesRequest:
      type: object
      required:
        - slides
      properties:
        slides:
          type: array
          items:
            type: object
            required:
              - id
              - order
            properties:
              id:
                $ref: '#/components/schemas/ObjectId'
              order:
                type: integer

    BulkUpdateSlideStatusRequest:
      type: object
      required:
        - ids
        - status
      properties:
        ids:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
        status:
          type: string
          enum: [active, inactive, draft, scheduled]

    # ==================== Notification Schemas ====================
    Notification:
      type: object
      properties:
        _id:
          $ref: '#/components/schemas/ObjectId'
        user:
          $ref: '#/components/schemas/ObjectId'
        type:
          type: string
          enum: [vote_cast, vote_refunded, voting_started, voting_ending_soon, voting_ended, results_published, payment_success, payment_failed, payment_pending, refund_processed, refund_failed, form_submitted, nomination_approved, nomination_rejected, nomination_converted, event_created, event_started, event_ending_soon, event_ended, event_cancelled, event_updated, candidate_approved, candidate_rejected, candidate_leading, candidate_profile_updated, candidate_profile_completed, coupon_received, coupon_expiring_soon, bundle_promotion, suspicious_activity, account_security, login_alert, password_changed, email_verified, system_announcement, system_maintenance, weekly_digest, achievement_unlocked]
        title:
          type: string
          maxLength: 200
        message:
          type: string
          maxLength: 1000
        channel:
          type: string
          enum: [in_app, email, sms, push, webhook]
          default: in_app
        status:
          type: string
          enum: [pending, sent, delivered, read, failed, cancelled]
          default: pending
        priority:
          type: string
          enum: [low, normal, high, urgent]
          default: normal
        event:
          $ref: '#/components/schemas/ObjectId'
        candidate:
          $ref: '#/components/schemas/ObjectId'
        category:
          $ref: '#/components/schemas/ObjectId'
        vote:
          $ref: '#/components/schemas/ObjectId'
        payment:
          $ref: '#/components/schemas/ObjectId'
        action_url:
          type: string
          description: URL for notification action
        action_label:
          type: string
          description: Button/link text
        icon:
          type: string
        image_url:
          type: string
        read_at:
          type: string
          format: date-time
        clicked_at:
          type: string
          format: date-time
        sent_at:
          type: string
          format: date-time
        delivered_at:
          type: string
          format: date-time
        expires_at:
          type: string
          format: date-time
        retry_count:
          type: integer
          default: 0
        metadata:
          type: object
          additionalProperties: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time

    CreateNotificationRequest:
      type: object
      required:
        - user
        - type
        - title
        - message
      properties:
        user:
          $ref: '#/components/schemas/ObjectId'
        type:
          type: string
        title:
          type: string
          maxLength: 200
        message:
          type: string
          maxLength: 1000
        channel:
          type: string
          enum: [in_app, email, sms, push, webhook]
        priority:
          type: string
          enum: [low, normal, high, urgent]
        event:
          $ref: '#/components/schemas/ObjectId'
        candidate:
          $ref: '#/components/schemas/ObjectId'
        category:
          $ref: '#/components/schemas/ObjectId'
        action_url:
          type: string
        action_label:
          type: string
        icon:
          type: string
        image_url:
          type: string
        expires_at:
          type: string
          format: date-time
        metadata:
          type: object

    BulkCreateNotificationRequest:
      type: object
      required:
        - users
        - type
        - title
        - message
      properties:
        users:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
          minItems: 1
        type:
          type: string
        title:
          type: string
        message:
          type: string
        channel:
          type: string
          enum: [in_app, email, sms, push, webhook]
        priority:
          type: string
          enum: [low, normal, high, urgent]
        event:
          $ref: '#/components/schemas/ObjectId'
        action_url:
          type: string
        action_label:
          type: string
        expires_at:
          type: string
          format: date-time

    UpdateNotificationRequest:
      type: object
      minProperties: 1
      properties:
        title:
          type: string
        message:
          type: string
        priority:
          type: string
          enum: [low, normal, high, urgent]
        action_url:
          type: string
        action_label:
          type: string
        expires_at:
          type: string
          format: date-time
        metadata:
          type: object

    BulkMarkAsReadRequest:
      type: object
      required:
        - ids
      properties:
        ids:
          type: array
          items:
            $ref: '#/components/schemas/ObjectId'
          minItems: 1

    UnreadCountResponse:
      type: object
      properties:
        success:
          type: boolean
        data:
          type: object
          properties:
            count:
              type: integer
            by_type:
              type: object
              additionalProperties:
                type: integer

  responses:
    UnauthorizedError:
      description: Authentication token is missing or invalid
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            success: false
            message: "Unauthorized"
            error: "You are not authorized to perform this action"

    ForbiddenError:
      description: User does not have permission to access this resource
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            success: false
            message: "Forbidden"
            error: "Access denied. You don't have permission for this resource"

    NotFoundError:
      description: The specified resource was not found
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            success: false
            message: "Not Found"
            error: "The requested resource was not found"

    ValidationError:
      description: Request validation failed
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            success: false
            message: "Validation Error"
            error: "Some required fields are missing or invalid"

    InternalServerError:
      description: Internal server error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/Error'
          example:
            success: false
            message: "Internal Server Error"
            error: "Something went wrong on our end"

  parameters:
    PageParam:
      in: query
      name: page
      schema:
        type: integer
        minimum: 1
        default: 1
      description: Page number for pagination

    LimitParam:
      in: query
      name: limit
      schema:
        type: integer
        minimum: 1
        maximum: 100
        default: 10
      description: Number of items per page

    SearchParam:
      in: query
      name: search
      schema:
        type: string
      description: Search query string

    SortParam:
      in: query
      name: sort
      schema:
        type: string
      description: Sort field (prefix with - for descending)

    IdParam:
      in: path
      name: id
      required: true
      schema:
        $ref: '#/components/schemas/ObjectId'
      description: Resource ID

    EventIdParam:
      in: path
      name: eventId
      required: true
      schema:
        $ref: '#/components/schemas/ObjectId'
      description: Event ID

    CategoryIdParam:
      in: path
      name: categoryId
      required: true
      schema:
        $ref: '#/components/schemas/ObjectId'
      description: Category ID

paths:
  # ==================
  # Health Check
  # ==================
  /health:
    get:
      tags:
        - Health
      summary: Health check endpoint
      description: Check the health status of the API and its services
      operationId: healthCheck
      responses:
        '200':
          description: System is healthy
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: "ok"
                  timestamp:
                    type: string
                    format: date-time
                  uptime:
                    type: number
                    example: 3600.5
                  environment:
                    type: string
                    example: "development"
                  services:
                    type: object
                    properties:
                      database:
                        type: string
                        example: "connected"
                      cache:
                        type: string
                        example: "connected"
                      agenda:
                        type: string
                        example: "ready"

  # ==================
  # Authentication Endpoints
  # ==================
  /auth/register:
    post:
      tags:
        - Authentication
      summary: Register a new user
      description: Create a new admin/organiser/moderator account
      operationId: register
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: User registered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '409':
          description: Email already exists
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /auth/login:
    post:
      tags:
        - Authentication
      summary: Login to the system
      description: Authenticate user and receive JWT tokens
      operationId: login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          description: Invalid credentials
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '423':
          description: Account locked due to too many failed attempts

  /auth/logout:
    post:
      tags:
        - Authentication
      summary: Logout current user
      description: Invalidate the current user's tokens
      operationId: logout
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Logout successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /auth/refresh-token:
    post:
      tags:
        - Authentication
      summary: Refresh access token
      description: Get a new access token using a valid refresh token
      operationId: refreshToken
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RefreshTokenRequest'
      responses:
        '200':
          description: Token refreshed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      accessToken:
                        type: string
                      expiresIn:
                        type: string
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /auth/verify-email:
    post:
      tags:
        - Authentication
      summary: Verify email address
      description: Verify user's email using verification token
      operationId: verifyEmail
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VerifyEmailRequest'
      responses:
        '200':
          description: Email verified successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: Invalid or expired token

  /auth/resend-verification:
    post:
      tags:
        - Authentication
      summary: Resend verification email
      description: Resend email verification link
      operationId: resendVerification
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResendVerificationRequest'
      responses:
        '200':
          description: Verification email sent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /auth/forgot-password:
    post:
      tags:
        - Authentication
      summary: Request password reset
      description: Send password reset email to user
      operationId: forgotPassword
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForgotPasswordRequest'
      responses:
        '200':
          description: Password reset email sent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /auth/reset-password:
    post:
      tags:
        - Authentication
      summary: Reset password
      description: Reset user password using reset token
      operationId: resetPassword
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequest'
      responses:
        '200':
          description: Password reset successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          description: Invalid or expired reset token

  /auth/change-password:
    post:
      tags:
        - Authentication
      summary: Change password
      description: Change the authenticated user's password
      operationId: changePassword
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ChangePasswordRequest'
      responses:
        '200':
          description: Password changed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          description: Current password is incorrect
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /auth/me:
    get:
      tags:
        - Authentication
      summary: Get current user
      description: Retrieve the authenticated user's profile
      operationId: getCurrentUser
      security:
        - BearerAuth: []
      responses:
        '200':
          description: User profile retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  # ==================
  # Candidate Authentication
  # ==================
  /auth/candidate/login:
    post:
      tags:
        - Authentication
      summary: Login as candidate
      description: Authenticate candidate with code/email and password
      operationId: candidateLogin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CandidateLoginRequest'
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoginResponse'
        '401':
          description: Invalid credentials

  /auth/candidate/logout:
    post:
      tags:
        - Authentication
      summary: Logout candidate
      description: Invalidate candidate tokens
      operationId: candidateLogout
      security:
        - CandidateAuth: []
      responses:
        '200':
          description: Logout successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /auth/candidate/forgot-password:
    post:
      tags:
        - Authentication
      summary: Request candidate password reset
      description: Send password reset email to candidate
      operationId: candidateForgotPassword
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ForgotPasswordRequest'
      responses:
        '200':
          description: Password reset email sent
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /auth/candidate/reset-password:
    post:
      tags:
        - Authentication
      summary: Reset candidate password
      description: Reset candidate password using token
      operationId: candidateResetPassword
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResetPasswordRequest'
      responses:
        '200':
          description: Password reset successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /auth/candidate/me:
    get:
      tags:
        - Authentication
      summary: Get current candidate
      description: Retrieve authenticated candidate's profile
      operationId: candidateMe
      security:
        - CandidateAuth: []
      responses:
        '200':
          description: Candidate profile retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  # ==================
  # User Endpoints
  # ==================
  /users/profile:
    get:
      tags:
        - Users
      summary: Get my profile
      description: Retrieve the authenticated user's full profile
      operationId: getMyProfile
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

    put:
      tags:
        - Users
      summary: Update my profile
      description: Update the authenticated user's profile
      operationId: updateMyProfile
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                bio:
                  type: string
                photo_url:
                  type: string
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /users/stats:
    get:
      tags:
        - Users
      summary: Get user statistics (Admin only)
      description: Retrieve platform user statistics
      operationId: getUserStats
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      totalUsers:
                        type: integer
                      activeUsers:
                        type: integer
                      byRole:
                        type: object
                      byStatus:
                        type: object
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /users/bulk/status:
    post:
      tags:
        - Users
      summary: Bulk update user status (Admin only)
      description: Update status for multiple users at once
      operationId: bulkUpdateUserStatus
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - userIds
                - status
              properties:
                userIds:
                  type: array
                  items:
                    $ref: '#/components/schemas/ObjectId'
                status:
                  type: string
                  enum: [active, inactive, suspended]
      responses:
        '200':
          description: Users updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /users:
    post:
      tags:
        - Users
      summary: Create a new user (Admin only)
      description: Create a new user account
      operationId: createUser
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RegisterRequest'
      responses:
        '201':
          description: User created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

    get:
      tags:
        - Users
      summary: List all users (Admin only)
      description: Retrieve paginated list of all users
      operationId: listUsers
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SearchParam'
        - in: query
          name: role
          schema:
            type: string
            enum: [super_admin, admin, organiser, moderator]
        - in: query
          name: status
          schema:
            type: string
            enum: [active, inactive, suspended, deleted]
      responses:
        '200':
          description: Users retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/User'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /users/{id}:
    get:
      tags:
        - Users
      summary: Get user by ID (Admin only)
      description: Retrieve detailed information about a specific user
      operationId: getUserById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: User retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/User'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Users
      summary: Update user (Admin only)
      description: Update a user's information
      operationId: updateUser
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                email:
                  type: string
                  format: email
                bio:
                  type: string
                status:
                  type: string
                  enum: [active, inactive, suspended]
      responses:
        '200':
          description: User updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Users
      summary: Delete user (Admin only)
      description: Soft delete a user account
      operationId: deleteUser
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: User deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /users/{id}/role:
    put:
      tags:
        - Users
      summary: Update user role (Super Admin only)
      description: Change a user's role
      operationId: updateUserRole
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - role
              properties:
                role:
                  type: string
                  enum: [admin, organiser, moderator]
      responses:
        '200':
          description: Role updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /users/{id}/permissions:
    put:
      tags:
        - Users
      summary: Update user permissions (Super Admin only)
      description: Update a user's permissions
      operationId: updateUserPermissions
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - permissions
              properties:
                permissions:
                  type: array
                  items:
                    type: string
                    enum: [read, write, update, delete]
      responses:
        '200':
          description: Permissions updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /users/{id}/activate:
    put:
      tags:
        - Users
      summary: Activate user (Admin only)
      description: Activate a user account
      operationId: activateUser
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: User activated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /users/{id}/deactivate:
    put:
      tags:
        - Users
      summary: Deactivate user (Admin only)
      description: Deactivate a user account
      operationId: deactivateUser
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: User deactivated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /users/{id}/suspend:
    put:
      tags:
        - Users
      summary: Suspend user (Admin only)
      description: Suspend a user account
      operationId: suspendUser
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  description: Reason for suspension
      responses:
        '200':
          description: User suspended successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ==================
  # Event Endpoints
  # ==================
  /events/public:
    get:
      tags:
        - Events
      summary: List public events
      description: Retrieve published public events
      operationId: listPublicEvents
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Events retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Event'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'

  /events/featured:
    get:
      tags:
        - Events
      summary: Get featured events
      description: Retrieve featured events for homepage display
      operationId: getFeaturedEvents
      responses:
        '200':
          description: Featured events retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Event'

  /events/upcoming:
    get:
      tags:
        - Events
      summary: Get upcoming events
      description: Retrieve upcoming events
      operationId: getUpcomingEvents
      parameters:
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Upcoming events retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Event'

  /events/slug/{slug}:
    get:
      tags:
        - Events
      summary: Get event by slug
      description: Retrieve event using URL-friendly slug
      operationId: getEventBySlug
      parameters:
        - in: path
          name: slug
          required: true
          schema:
            type: string
          description: Event slug
      responses:
        '200':
          description: Event retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Event'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /events:
    post:
      tags:
        - Events
      summary: Create a new event
      description: Create a new event (Admin/Organiser only)
      operationId: createEvent
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateEventRequest'
      responses:
        '201':
          description: Event created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Event'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

    get:
      tags:
        - Events
      summary: List all events (Admin)
      description: Retrieve paginated list of all events
      operationId: listEvents
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SearchParam'
        - in: query
          name: status
          schema:
            type: string
            enum: [active, upcoming, archived, cancelled, pending]
        - in: query
          name: visibility
          schema:
            type: string
            enum: [public, private, unlisted]
      responses:
        '200':
          description: Events retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Event'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /events/{id}:
    get:
      tags:
        - Events
      summary: Get event by ID
      description: Retrieve detailed information about a specific event
      operationId: getEventById
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Event retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Event'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Events
      summary: Update event
      description: Update an event (Admin/Organiser only)
      operationId: updateEvent
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEventRequest'
      responses:
        '200':
          description: Event updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Events
      summary: Delete event
      description: Soft delete an event (Admin only)
      operationId: deleteEvent
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Event deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /events/{id}/publish:
    put:
      tags:
        - Events
      summary: Publish event
      description: Publish an event to make it visible
      operationId: publishEvent
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Event published successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /events/{id}/unpublish:
    put:
      tags:
        - Events
      summary: Unpublish event
      description: Unpublish an event to hide it
      operationId: unpublishEvent
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Event unpublished successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /events/{id}/status:
    put:
      tags:
        - Events
      summary: Update event status
      description: Change event status
      operationId: updateEventStatus
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - status
              properties:
                status:
                  type: string
                  enum: [active, upcoming, archived, cancelled, pending]
      responses:
        '200':
          description: Status updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /events/{id}/cancel:
    put:
      tags:
        - Events
      summary: Cancel event
      description: Cancel an event
      operationId: cancelEvent
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  description: Reason for cancellation
      responses:
        '200':
          description: Event cancelled successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /events/{id}/complete:
    put:
      tags:
        - Events
      summary: Complete event
      description: Mark an event as completed
      operationId: completeEvent
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Event completed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /events/{id}/featured:
    put:
      tags:
        - Events
      summary: Toggle featured status
      description: Toggle event featured status (Admin only)
      operationId: toggleEventFeatured
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Featured status toggled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /events/{id}/categories:
    get:
      tags:
        - Events
      summary: Get event categories
      description: Retrieve categories for an event
      operationId: getEventCategories
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Categories retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
        '404':
          $ref: '#/components/responses/NotFoundError'

  /events/{id}/candidates:
    get:
      tags:
        - Events
      summary: Get event candidates
      description: Retrieve all candidates for an event
      operationId: getEventCandidates
      parameters:
        - $ref: '#/components/parameters/IdParam'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Candidates retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /events/{id}/stats:
    get:
      tags:
        - Events
      summary: Get event statistics
      description: Retrieve statistics for an event (Admin only)
      operationId: getEventStats
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Statistics retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      totalCategories:
                        type: integer
                      totalCandidates:
                        type: integer
                      totalVotes:
                        type: integer
                      totalRevenue:
                        type: number
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /events/{id}/votes/summary:
    get:
      tags:
        - Events
      summary: Get event vote summary
      description: Retrieve vote summary for an event (Admin only)
      operationId: getEventVoteSummary
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Vote summary retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /events/{id}/results:
    get:
      tags:
        - Events
      summary: Get event results
      description: Retrieve voting results for an event
      operationId: getEventResults
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Results retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
        '403':
          description: Results not yet published
        '404':
          $ref: '#/components/responses/NotFoundError'

  /events/{id}/results/publish:
    put:
      tags:
        - Events
      summary: Publish event results
      description: Publish voting results for an event (Admin only)
      operationId: publishEventResults
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Results published successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /events/{id}/duplicate:
    post:
      tags:
        - Events
      summary: Duplicate event
      description: Create a copy of an event (Admin/Organiser only)
      operationId: duplicateEvent
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: Name for the duplicated event
      responses:
        '201':
          description: Event duplicated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Event'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ==================
  # Category Endpoints
  # ==================
  /categories/featured:
    get:
      tags:
        - Categories
      summary: Get featured categories
      description: Retrieve featured categories (public)
      operationId: getFeaturedCategories
      responses:
        '200':
          description: Featured categories retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Category'

  /categories:
    post:
      tags:
        - Categories
      summary: Create a new category
      description: Create a new category (Admin/Organiser only)
      operationId: createCategory
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCategoryRequest'
      responses:
        '201':
          description: Category created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Category'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

    get:
      tags:
        - Categories
      summary: List all categories
      description: Retrieve paginated list of categories (Admin only)
      operationId: listCategories
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SearchParam'
        - in: query
          name: event
          schema:
            type: string
          description: Filter by event ID
        - in: query
          name: status
          schema:
            type: string
            enum: [active, inactive, archived, closed]
      responses:
        '200':
          description: Categories retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Category'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /categories/reorder:
    put:
      tags:
        - Categories
      summary: Reorder categories
      description: Update display order of multiple categories (Admin/Organiser only)
      operationId: reorderCategories
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - categories
              properties:
                categories:
                  type: array
                  items:
                    type: object
                    required:
                      - id
                      - display_order
                    properties:
                      id:
                        $ref: '#/components/schemas/ObjectId'
                      display_order:
                        type: integer
      responses:
        '200':
          description: Categories reordered successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /categories/{id}:
    get:
      tags:
        - Categories
      summary: Get category by ID
      description: Retrieve category details (public for active categories)
      operationId: getCategoryById
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Category retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Category'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Categories
      summary: Update category
      description: Update a category (Admin/Organiser only)
      operationId: updateCategory
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCategoryRequest'
      responses:
        '200':
          description: Category updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Categories
      summary: Delete category
      description: Soft delete a category (Admin only)
      operationId: deleteCategory
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Category deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /categories/{id}/voting/open:
    put:
      tags:
        - Categories
      summary: Open voting
      description: Open voting for a category (Admin/Organiser only)
      operationId: openCategoryVoting
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Voting opened successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /categories/{id}/voting/close:
    put:
      tags:
        - Categories
      summary: Close voting
      description: Close voting for a category (Admin/Organiser only)
      operationId: closeCategoryVoting
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Voting closed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /categories/{id}/voting/deadline:
    put:
      tags:
        - Categories
      summary: Update voting deadline
      description: Update voting deadline for a category (Admin/Organiser only)
      operationId: updateCategoryDeadline
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - deadline
              properties:
                deadline:
                  type: string
                  format: date-time
                  description: New voting deadline
      responses:
        '200':
          description: Deadline updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /categories/{id}/voting/extend:
    put:
      tags:
        - Categories
      summary: Extend voting deadline
      description: Extend voting deadline for a category (Admin/Organiser only)
      operationId: extendCategoryDeadline
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - extension_hours
              properties:
                extension_hours:
                  type: integer
                  minimum: 1
                  description: Hours to extend deadline
      responses:
        '200':
          description: Deadline extended successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /categories/{id}/candidates:
    get:
      tags:
        - Categories
      summary: Get category candidates
      description: Retrieve candidates in a category (public for active categories)
      operationId: getCategoryCandidates
      parameters:
        - $ref: '#/components/parameters/IdParam'
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Candidates retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '404':
          $ref: '#/components/responses/NotFoundError'

    post:
      tags:
        - Categories
      summary: Add candidates to category
      description: Add candidates to a category (Admin/Organiser only)
      operationId: addCandidatesToCategory
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - candidates
              properties:
                candidates:
                  type: array
                  items:
                    $ref: '#/components/schemas/ObjectId'
                  description: Array of candidate IDs to add
      responses:
        '200':
          description: Candidates added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Categories
      summary: Remove candidates from category
      description: Remove candidates from a category (Admin/Organiser only)
      operationId: removeCandidatesFromCategory
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - candidates
              properties:
                candidates:
                  type: array
                  items:
                    $ref: '#/components/schemas/ObjectId'
                  description: Array of candidate IDs to remove
      responses:
        '200':
          description: Candidates removed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /categories/{id}/featured:
    put:
      tags:
        - Categories
      summary: Toggle featured status
      description: Toggle category featured status (Admin/Organiser only)
      operationId: toggleCategoryFeatured
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Featured status toggled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /categories/{id}/order:
    put:
      tags:
        - Categories
      summary: Update display order
      description: Update category display order (Admin/Organiser only)
      operationId: updateCategoryOrder
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - display_order
              properties:
                display_order:
                  type: integer
                  minimum: 0
      responses:
        '200':
          description: Order updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /categories/{id}/stats:
    get:
      tags:
        - Categories
      summary: Get category statistics
      description: Retrieve statistics for a category (Admin only)
      operationId: getCategoryStats
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Statistics retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      totalCandidates:
                        type: integer
                      totalVotes:
                        type: integer
                      isVotingOpen:
                        type: boolean
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /categories/{id}/results:
    get:
      tags:
        - Categories
      summary: Get category results
      description: Retrieve voting results for a category (visibility based on settings)
      operationId: getCategoryResults
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Results retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
        '403':
          description: Results not visible
        '404':
          $ref: '#/components/responses/NotFoundError'

  /categories/{id}/results/publish:
    put:
      tags:
        - Categories
      summary: Publish category results
      description: Publish voting results for a category (Admin only)
      operationId: publishCategoryResults
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Results published successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /categories/{id}/vote-counts:
    get:
      tags:
        - Categories
      summary: Get vote counts
      description: Retrieve vote counts by candidate (Admin only)
      operationId: getCategoryVoteCounts
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Vote counts retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        candidate:
                          $ref: '#/components/schemas/ObjectId'
                        candidateName:
                          type: string
                        voteCount:
                          type: integer
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ==================
  # Candidate Endpoints
  # ==================
  /candidates/code/{code}:
    get:
      tags:
        - Candidates
      summary: Get candidate by code
      description: Retrieve candidate by unique code (public)
      operationId: getCandidateByCode
      parameters:
        - in: path
          name: code
          required: true
          schema:
            type: string
          description: Unique candidate code
      responses:
        '200':
          description: Candidate retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Candidate'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /candidates/profile:
    get:
      tags:
        - Candidates
      summary: Get own profile
      description: Get authenticated candidate's own profile
      operationId: getCandidateProfile
      security:
        - CandidateAuth: []
      responses:
        '200':
          description: Profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Candidate'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

    put:
      tags:
        - Candidates
      summary: Update own profile
      description: Update authenticated candidate's own profile
      operationId: updateCandidateProfile
      security:
        - CandidateAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CandidateProfileUpdateRequest'
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /candidates/profile/history:
    get:
      tags:
        - Candidates
      summary: Get profile update history
      description: Get authenticated candidate's profile update history
      operationId: getCandidateProfileHistory
      security:
        - CandidateAuth: []
      responses:
        '200':
          description: History retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /candidates/bulk/approve:
    post:
      tags:
        - Candidates
      summary: Bulk approve candidates
      description: Approve multiple candidates at once (Admin only)
      operationId: bulkApproveCandidates
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - candidateIds
              properties:
                candidateIds:
                  type: array
                  items:
                    $ref: '#/components/schemas/ObjectId'
      responses:
        '200':
          description: Candidates approved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      approved:
                        type: integer
                      failed:
                        type: integer
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /candidates/bulk/reject:
    post:
      tags:
        - Candidates
      summary: Bulk reject candidates
      description: Reject multiple candidates at once (Admin only)
      operationId: bulkRejectCandidates
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - candidateIds
              properties:
                candidateIds:
                  type: array
                  items:
                    $ref: '#/components/schemas/ObjectId'
                reason:
                  type: string
                  description: Reason for rejection
      responses:
        '200':
          description: Candidates rejected successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      rejected:
                        type: integer
                      failed:
                        type: integer
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /candidates:
    get:
      tags:
        - Candidates
      summary: List all candidates
      description: Retrieve paginated list of candidates (Admin/Organiser only)
      operationId: listCandidates
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/SearchParam'
        - in: query
          name: event
          schema:
            type: string
          description: Filter by event ID
        - in: query
          name: status
          schema:
            type: string
            enum: [pending, approved, rejected, profile_update_pending, pending_profile_completion]
        - in: query
          name: category
          schema:
            type: string
          description: Filter by category ID
      responses:
        '200':
          description: Candidates retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Candidate'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

    post:
      tags:
        - Candidates
      summary: Create a new candidate
      description: Create a new candidate (Admin/Organiser only)
      operationId: createCandidate
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCandidateRequest'
      responses:
        '201':
          description: Candidate created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Candidate'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /candidates/{id}:
    get:
      tags:
        - Candidates
      summary: Get candidate by ID
      description: Retrieve candidate details (Admin/Organiser only)
      operationId: getCandidateById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Candidate retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Candidate'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Candidates
      summary: Update candidate
      description: Update a candidate (Admin/Organiser only)
      operationId: updateCandidate
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCandidateRequest'
      responses:
        '200':
          description: Candidate updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Candidates
      summary: Delete candidate
      description: Soft delete a candidate (Admin only)
      operationId: deleteCandidate
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Candidate deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /candidates/{id}/approve:
    put:
      tags:
        - Candidates
      summary: Approve candidate
      description: Approve a candidate (Admin/Organiser only)
      operationId: approveCandidate
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Candidate approved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /candidates/{id}/reject:
    put:
      tags:
        - Candidates
      summary: Reject candidate
      description: Reject a candidate (Admin/Organiser only)
      operationId: rejectCandidate
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  description: Reason for rejection
      responses:
        '200':
          description: Candidate rejected successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /candidates/{id}/suspend:
    put:
      tags:
        - Candidates
      summary: Suspend candidate
      description: Suspend a candidate (Admin only)
      operationId: suspendCandidate
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  description: Reason for suspension
      responses:
        '200':
          description: Candidate suspended successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /candidates/{id}/reinstate:
    put:
      tags:
        - Candidates
      summary: Reinstate candidate
      description: Reinstate a suspended candidate (Admin only)
      operationId: reinstateCandidate
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Candidate reinstated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /candidates/{id}/categories:
    get:
      tags:
        - Candidates
      summary: Get candidate categories
      description: Retrieve categories for a candidate (Admin/Organiser only)
      operationId: getCandidateCategories
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Categories retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Category'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    post:
      tags:
        - Candidates
      summary: Add candidate to categories
      description: Add a candidate to categories (Admin/Organiser only)
      operationId: addCandidateToCategories
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - categories
              properties:
                categories:
                  type: array
                  items:
                    $ref: '#/components/schemas/ObjectId'
      responses:
        '200':
          description: Candidate added to categories
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Candidates
      summary: Remove candidate from categories
      description: Remove a candidate from categories (Admin/Organiser only)
      operationId: removeCandidateFromCategories
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - categories
              properties:
                categories:
                  type: array
                  items:
                    $ref: '#/components/schemas/ObjectId'
      responses:
        '200':
          description: Candidate removed from categories
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /candidates/{id}/stats:
    get:
      tags:
        - Candidates
      summary: Get candidate statistics
      description: Retrieve statistics for a candidate (Admin/Organiser only)
      operationId: getCandidateStats
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Statistics retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      totalVotes:
                        type: integer
                      totalCategories:
                        type: integer
                      viewCount:
                        type: integer
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /candidates/{id}/votes:
    get:
      tags:
        - Candidates
      summary: Get candidate vote count
      description: Retrieve vote count for a candidate (Admin/Organiser only)
      operationId: getCandidateVotes
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Vote count retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      voteCount:
                        type: integer
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ==================
  # Vote Endpoints
  # ==================
  /votes:
    post:
      tags:
        - Votes
      summary: Cast a vote
      description: Cast a vote using a vote code
      operationId: castVote
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CastVoteRequest'
      responses:
        '201':
          description: Vote cast successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Vote'
        '400':
          $ref: '#/components/responses/ValidationError'

    get:
      tags:
        - Votes
      summary: List all votes
      description: Retrieve paginated list of votes (Admin only)
      operationId: listVotes
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - in: query
          name: event
          schema:
            type: string
        - in: query
          name: category
          schema:
            type: string
        - in: query
          name: candidate
          schema:
            type: string
        - in: query
          name: status
          schema:
            type: string
            enum: [active, refunded]
      responses:
        '200':
          description: Votes retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Vote'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /votes/validate-eligibility:
    post:
      tags:
        - Votes
      summary: Validate vote eligibility
      description: Check if vote code is eligible to vote in a category
      operationId: validateVoteEligibility
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/VoteEligibilityRequest'
      responses:
        '200':
          description: Eligibility check result
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      eligible:
                        type: boolean
                      reason:
                        type: string
                      votes_remaining:
                        type: integer

  /votes/code/{code}:
    get:
      tags:
        - Votes
      summary: Get votes by code
      description: Retrieve votes cast with a specific vote code
      operationId: getVotesByCode
      parameters:
        - in: path
          name: code
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Votes retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Vote'

  /votes/history/{code}:
    get:
      tags:
        - Votes
      summary: Get voter history
      description: Retrieve voting history for a vote code
      operationId: getVoterHistory
      parameters:
        - in: path
          name: code
          required: true
          schema:
            type: string
      responses:
        '200':
          description: History retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object

  /votes/results/category/{categoryId}:
    get:
      tags:
        - Votes
      summary: Get category results
      description: Retrieve voting results for a category (visibility depends on settings)
      operationId: getVoteCategoryResults
      parameters:
        - in: path
          name: categoryId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Results retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object

  /votes/results/event/{eventId}:
    get:
      tags:
        - Votes
      summary: Get event results
      description: Retrieve voting results for an event
      operationId: getVoteEventResults
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Results retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object

  /votes/count/candidate/{candidateId}:
    get:
      tags:
        - Votes
      summary: Get candidate vote count
      description: Retrieve vote count for a candidate
      operationId: getVoteCountByCandidate
      parameters:
        - in: path
          name: candidateId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Count retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      count:
                        type: integer

  /votes/count/category/{categoryId}:
    get:
      tags:
        - Votes
      summary: Get category vote count
      description: Retrieve total votes in a category
      operationId: getVoteCountByCategory
      parameters:
        - in: path
          name: categoryId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Count retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      count:
                        type: integer

  /votes/count/event/{eventId}:
    get:
      tags:
        - Votes
      summary: Get event vote count
      description: Retrieve total votes in an event
      operationId: getVoteCountByEvent
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Count retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      count:
                        type: integer

  /votes/trends/{eventId}:
    get:
      tags:
        - Votes
      summary: Get voting trends
      description: Retrieve voting trends for an event (Admin only)
      operationId: getVotingTrends
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Trends retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /votes/distribution/{eventId}:
    get:
      tags:
        - Votes
      summary: Get vote distribution
      description: Retrieve vote distribution by category (Admin only)
      operationId: getVoteDistribution
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Distribution retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /votes/top-candidates/{eventId}:
    get:
      tags:
        - Votes
      summary: Get top candidates
      description: Retrieve top candidates for an event (Admin only)
      operationId: getTopCandidates
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Top candidates retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /votes/stats/{eventId}:
    get:
      tags:
        - Votes
      summary: Get voting statistics
      description: Retrieve voting statistics for an event (Admin only)
      operationId: getVotingStats
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Statistics retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /votes/suspicious/{eventId}:
    get:
      tags:
        - Votes
      summary: Detect suspicious votes
      description: Detect suspicious voting patterns (Admin only)
      operationId: detectSuspiciousVotes
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Suspicious activity report
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /votes/candidate/{candidateId}:
    get:
      tags:
        - Votes
      summary: Get votes by candidate
      description: Retrieve votes for a candidate (Admin only)
      operationId: getVotesByCandidate
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: candidateId
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Votes retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Vote'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /votes/category/{categoryId}:
    get:
      tags:
        - Votes
      summary: Get votes by category
      description: Retrieve votes for a category (Admin only)
      operationId: getVotesByCategory
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: categoryId
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Votes retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Vote'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /votes/event/{eventId}:
    get:
      tags:
        - Votes
      summary: Get votes by event
      description: Retrieve votes for an event (Admin only)
      operationId: getVotesByEvent
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Votes retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Vote'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /votes/{id}:
    get:
      tags:
        - Votes
      summary: Get vote by ID
      description: Retrieve vote details (Admin only)
      operationId: getVoteById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Vote retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Vote'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /votes/{id}/refund:
    post:
      tags:
        - Votes
      summary: Refund a vote
      description: Refund a vote (Admin only)
      operationId: refundVote
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  description: Reason for refund
      responses:
        '200':
          description: Vote refunded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ==================
  # Bundle Endpoints
  # ==================
  /bundles/featured:
    get:
      tags:
        - Bundles
      summary: Get featured bundles
      description: Retrieve featured vote bundles
      operationId: getFeaturedBundles
      responses:
        '200':
          description: Bundles retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Bundle'

  /bundles/popular:
    get:
      tags:
        - Bundles
      summary: Get popular bundles
      description: Retrieve popular vote bundles
      operationId: getPopularBundles
      responses:
        '200':
          description: Bundles retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Bundle'

  /bundles/best-value:
    get:
      tags:
        - Bundles
      summary: Get best value bundles
      description: Retrieve best value bundles (highest discount)
      operationId: getBestValueBundles
      responses:
        '200':
          description: Bundles retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Bundle'

  /bundles/price-range:
    get:
      tags:
        - Bundles
      summary: Get bundles by price range
      description: Retrieve bundles within a price range
      operationId: getBundlesByPriceRange
      parameters:
        - in: query
          name: min
          schema:
            type: number
        - in: query
          name: max
          schema:
            type: number
      responses:
        '200':
          description: Bundles retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Bundle'

  /bundles/slug/{slug}:
    get:
      tags:
        - Bundles
      summary: Get bundle by slug
      description: Retrieve bundle by URL slug
      operationId: getBundleBySlug
      parameters:
        - in: path
          name: slug
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Bundle retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Bundle'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /bundles/event/{eventId}:
    get:
      tags:
        - Bundles
      summary: Get bundles by event
      description: Retrieve bundles for an event
      operationId: getBundlesByEvent
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Bundles retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Bundle'

  /bundles/event/{eventId}/available:
    get:
      tags:
        - Bundles
      summary: Get available bundles
      description: Retrieve available bundles for an event
      operationId: getAvailableBundlesByEvent
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Bundles retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Bundle'

  /bundles/category/{categoryId}:
    get:
      tags:
        - Bundles
      summary: Get bundles by category
      description: Retrieve bundles available for a category
      operationId: getBundlesByCategory
      parameters:
        - in: path
          name: categoryId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Bundles retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Bundle'

  /bundles/expiring-soon:
    get:
      tags:
        - Bundles
      summary: Get expiring bundles
      description: Retrieve bundles expiring soon (Admin only)
      operationId: getExpiringSoonBundles
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Bundles retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Bundle'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /bundles/expired:
    get:
      tags:
        - Bundles
      summary: Get expired bundles
      description: Retrieve expired bundles (Admin only)
      operationId: getExpiredBundles
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Bundles retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Bundle'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /bundles:
    post:
      tags:
        - Bundles
      summary: Create a bundle
      description: Create a new vote bundle (Admin/Organiser only)
      operationId: createBundle
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateBundleRequest'
      responses:
        '201':
          description: Bundle created
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Bundle'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

    get:
      tags:
        - Bundles
      summary: List all bundles
      description: Retrieve paginated list of bundles (Admin only)
      operationId: listBundles
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - in: query
          name: event
          schema:
            type: string
        - in: query
          name: status
          schema:
            type: string
            enum: [active, inactive, archived]
      responses:
        '200':
          description: Bundles retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Bundle'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /bundles/{id}:
    get:
      tags:
        - Bundles
      summary: Get bundle by ID
      description: Retrieve bundle details
      operationId: getBundleById
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Bundle retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Bundle'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Bundles
      summary: Update bundle
      description: Update a bundle (Admin/Organiser only)
      operationId: updateBundle
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateBundleRequest'
      responses:
        '200':
          description: Bundle updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Bundles
      summary: Delete bundle
      description: Soft delete a bundle (Admin only)
      operationId: deleteBundle
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Bundle deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /bundles/{id}/validate:
    get:
      tags:
        - Bundles
      summary: Validate bundle availability
      description: Check if bundle is available for purchase
      operationId: validateBundleAvailability
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Validation result
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      available:
                        type: boolean
                      reason:
                        type: string

  /bundles/{id}/activate:
    put:
      tags:
        - Bundles
      summary: Activate bundle
      description: Activate a bundle (Admin/Organiser only)
      operationId: activateBundle
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Bundle activated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /bundles/{id}/deactivate:
    put:
      tags:
        - Bundles
      summary: Deactivate bundle
      description: Deactivate a bundle (Admin/Organiser only)
      operationId: deactivateBundle
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Bundle deactivated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /bundles/{id}/toggle-featured:
    put:
      tags:
        - Bundles
      summary: Toggle featured status
      description: Toggle bundle featured status (Admin/Organiser only)
      operationId: toggleBundleFeatured
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Featured status toggled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /bundles/{id}/toggle-popular:
    put:
      tags:
        - Bundles
      summary: Toggle popular status
      description: Toggle bundle popular status (Admin/Organiser only)
      operationId: toggleBundlePopular
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Popular status toggled
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ==================
  # Payment Endpoints
  # ==================
  /payments/initialize:
    post:
      tags:
        - Payments
      summary: Initialize payment
      description: Initialize a new payment transaction
      operationId: initializePayment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InitializePaymentRequest'
      responses:
        '200':
          description: Payment initialized
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/InitializePaymentResponse'
        '400':
          $ref: '#/components/responses/ValidationError'

  /payments/verify/{reference}:
    get:
      tags:
        - Payments
      summary: Verify payment
      description: Verify payment status by reference
      operationId: verifyPayment
      parameters:
        - in: path
          name: reference
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Payment verified
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Payment'

  /payments/webhook:
    post:
      tags:
        - Payments
      summary: Payment webhook
      description: Handle Paystack webhook notifications
      operationId: paymentWebhook
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
      responses:
        '200':
          description: Webhook processed

  /payments/validate-vote-code:
    post:
      tags:
        - Payments
      summary: Validate vote code
      description: Validate a vote code
      operationId: validateVoteCode
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - vote_code
              properties:
                vote_code:
                  type: string
      responses:
        '200':
          description: Validation result
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      valid:
                        type: boolean
                      votes_remaining:
                        type: integer

  /payments/vote-code/{code}/status:
    get:
      tags:
        - Payments
      summary: Get vote code status
      description: Get status and remaining votes for a code
      operationId: getVoteCodeStatus
      parameters:
        - in: path
          name: code
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Status retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      votes_remaining:
                        type: integer
                      votes_cast:
                        type: integer
                      votes_purchased:
                        type: integer

  /payments/vote-code/{code}:
    get:
      tags:
        - Payments
      summary: Get payment by vote code
      description: Retrieve payment details by vote code
      operationId: getPaymentByVoteCode
      parameters:
        - in: path
          name: code
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Payment retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Payment'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /payments/reference/{reference}:
    get:
      tags:
        - Payments
      summary: Get payment by reference
      description: Retrieve payment by transaction reference
      operationId: getPaymentByReference
      parameters:
        - in: path
          name: reference
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Payment retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Payment'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /payments/stats/{eventId}:
    get:
      tags:
        - Payments
      summary: Get payment statistics
      description: Retrieve payment statistics for an event (Admin only)
      operationId: getPaymentStats
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Statistics retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: object
                    properties:
                      totalRevenue:
                        type: number
                      totalPayments:
                        type: integer
                      completedPayments:
                        type: integer
                      pendingPayments:
                        type: integer
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /payments/revenue/{eventId}:
    get:
      tags:
        - Payments
      summary: Get revenue by bundle
      description: Retrieve revenue breakdown by bundle (Admin only)
      operationId: getRevenueByBundle
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Revenue breakdown retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        bundle:
                          type: string
                        revenue:
                          type: number
                        count:
                          type: integer
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /payments/daily-revenue/{eventId}:
    get:
      tags:
        - Payments
      summary: Get daily revenue
      description: Retrieve daily revenue for an event (Admin only)
      operationId: getDailyRevenue
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Daily revenue retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        date:
                          type: string
                          format: date
                        revenue:
                          type: number
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /payments/event/{eventId}:
    get:
      tags:
        - Payments
      summary: Get payments by event
      description: Retrieve payments for an event (Admin only)
      operationId: getPaymentsByEvent
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: eventId
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Payments retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Payment'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /payments/bundle/{bundleId}:
    get:
      tags:
        - Payments
      summary: Get payments by bundle
      description: Retrieve payments for a bundle (Admin only)
      operationId: getPaymentsByBundle
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: bundleId
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Payments retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Payment'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /payments/voter/{email}:
    get:
      tags:
        - Payments
      summary: Get voter payment history
      description: Retrieve payment history for a voter (Admin only)
      operationId: getVoterPaymentHistory
      security:
        - BearerAuth: []
      parameters:
        - in: path
          name: email
          required: true
          schema:
            type: string
      responses:
        '200':
          description: History retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Payment'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /payments:
    get:
      tags:
        - Payments
      summary: List all payments
      description: Retrieve paginated list of payments (Admin only)
      operationId: listPayments
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - in: query
          name: event
          schema:
            type: string
        - in: query
          name: status
          schema:
            type: string
            enum: [pending, completed, failed, refunded]
      responses:
        '200':
          description: Payments retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Payment'
                  meta:
                    $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /payments/{id}:
    get:
      tags:
        - Payments
      summary: Get payment by ID
      description: Retrieve payment details (Admin only)
      operationId: getPaymentById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Payment retrieved
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                  data:
                    $ref: '#/components/schemas/Payment'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /payments/{id}/refund:
    post:
      tags:
        - Payments
      summary: Refund payment
      description: Refund a payment (Admin only)
      operationId: refundPayment
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
                  description: Reason for refund
      responses:
        '200':
          description: Payment refunded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ==================== Form Endpoints ====================

  /forms:
    post:
      tags:
        - Forms
      summary: Create a new form
      description: Create a new dynamic form for nominations, registrations, surveys, or feedback
      operationId: createForm
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateFormRequest'
      responses:
        '201':
          description: Form created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Form'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

    get:
      tags:
        - Forms
      summary: List all forms
      description: Get paginated list of forms with filters (Admin only)
      operationId: listForms
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: form_type
          in: query
          schema:
            type: string
            enum: [nomination, registration, survey, feedback]
        - name: status
          in: query
          schema:
            type: string
            enum: [draft, active, closed, archived]
        - name: event
          in: query
          schema:
            type: string
          description: Filter by event ID
      responses:
        '200':
          description: List of forms
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Form'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /forms/slug/{slug}:
    get:
      tags:
        - Forms
      summary: Get form by slug
      description: Get a published form by its URL-friendly slug (Public)
      operationId: getFormBySlug
      parameters:
        - name: slug
          in: path
          required: true
          schema:
            type: string
          description: Form slug
      responses:
        '200':
          description: Form details
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Form'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /forms/event/{eventId}:
    get:
      tags:
        - Forms
      summary: Get forms by event
      description: Get all forms for an event (Admin only)
      operationId: getFormsByEvent
      security:
        - BearerAuth: []
      parameters:
        - name: eventId
          in: path
          required: true
          schema:
            type: string
          description: Event ID
        - name: form_type
          in: query
          schema:
            type: string
            enum: [nomination, registration, survey, feedback]
        - name: status
          in: query
          schema:
            type: string
            enum: [draft, active, closed, archived]
      responses:
        '200':
          description: List of forms for event
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Form'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /forms/event/{eventId}/nominations:
    get:
      tags:
        - Forms
      summary: Get nomination forms by event
      description: Get all nomination forms for an event (Admin only)
      operationId: getNominationFormsByEvent
      security:
        - BearerAuth: []
      parameters:
        - name: eventId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: List of nomination forms
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Form'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /forms/{id}:
    get:
      tags:
        - Forms
      summary: Get form by ID
      description: Get form details (Public for published, Auth for unpublished)
      operationId: getFormById
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Form details
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Form'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Forms
      summary: Update form
      description: Update form details (Admin/Organiser only)
      operationId: updateForm
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateFormRequest'
      responses:
        '200':
          description: Form updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Form'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Forms
      summary: Delete form
      description: Soft delete a form (Admin only)
      operationId: deleteForm
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Form deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /forms/{id}/publish:
    put:
      tags:
        - Forms
      summary: Publish form
      description: Publish a draft form to make it accessible (Admin/Organiser only)
      operationId: publishForm
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Form published
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Form'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /forms/{id}/close:
    put:
      tags:
        - Forms
      summary: Close form
      description: Close a form to stop accepting submissions (Admin/Organiser only)
      operationId: closeForm
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Form closed
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Form'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /forms/{id}/field-mapping:
    get:
      tags:
        - Forms
      summary: Get field mapping
      description: Get field mapping configuration for candidate creation (Admin/Organiser only)
      operationId: getFormFieldMapping
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Field mapping configuration
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          form_id:
                            $ref: '#/components/schemas/ObjectId'
                          mapping:
                            $ref: '#/components/schemas/FieldMappingRequest'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Forms
      summary: Update field mapping
      description: Update field mapping for candidate creation from submissions (Admin/Organiser only)
      operationId: updateFormFieldMapping
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/FieldMappingRequest'
      responses:
        '200':
          description: Field mapping updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ==================== Submission Endpoints ====================

  /submissions:
    post:
      tags:
        - Submissions
      summary: Submit a form
      description: Submit a form response (Public or authenticated based on form settings)
      operationId: submitForm
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSubmissionRequest'
      responses:
        '201':
          description: Submission created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          submission:
                            $ref: '#/components/schemas/Submission'
                          submission_number:
                            type: string
                          message:
                            type: string
        '400':
          $ref: '#/components/responses/ValidationError'

    get:
      tags:
        - Submissions
      summary: List all submissions
      description: Get paginated list of submissions with filters (Admin only)
      operationId: listSubmissions
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: form
          in: query
          schema:
            type: string
          description: Filter by form ID
        - name: event
          in: query
          schema:
            type: string
          description: Filter by event ID
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, approved, rejected, duplicate, under_review]
        - name: is_duplicate
          in: query
          schema:
            type: boolean
          description: Filter by duplicate status
      responses:
        '200':
          description: List of submissions
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Submission'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /submissions/me:
    get:
      tags:
        - Submissions
      summary: Get my submissions
      description: Get current user's form submissions
      operationId: getMySubmissions
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: form
          in: query
          schema:
            type: string
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, approved, rejected, duplicate, under_review]
      responses:
        '200':
          description: User's submissions
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Submission'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /submissions/form/{formId}:
    get:
      tags:
        - Submissions
      summary: Get submissions by form
      description: Get all submissions for a specific form (Admin only)
      operationId: getSubmissionsByForm
      security:
        - BearerAuth: []
      parameters:
        - name: formId
          in: path
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, approved, rejected, duplicate, under_review]
      responses:
        '200':
          description: Submissions for form
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Submission'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /submissions/form/{formId}/duplicates:
    get:
      tags:
        - Submissions
      summary: Get suspected duplicates for form
      description: Get submissions flagged as potential duplicates (Admin only)
      operationId: getSuspectedDuplicates
      security:
        - BearerAuth: []
      parameters:
        - name: formId
          in: path
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: min_similarity
          in: query
          schema:
            type: number
            minimum: 0
            maximum: 100
          description: Minimum similarity score to include
      responses:
        '200':
          description: Suspected duplicates
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Submission'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /submissions/event/{eventId}:
    get:
      tags:
        - Submissions
      summary: Get submissions by event
      description: Get all submissions for an event (Admin only)
      operationId: getSubmissionsByEvent
      security:
        - BearerAuth: []
      parameters:
        - name: eventId
          in: path
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, approved, rejected, duplicate, under_review]
      responses:
        '200':
          description: Submissions for event
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Submission'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /submissions/nominee/{identifier}:
    get:
      tags:
        - Submissions
      summary: Get submissions by nominee
      description: Get all submissions for a nominee across categories (Admin only)
      operationId: getSubmissionsByNominee
      security:
        - BearerAuth: []
      parameters:
        - name: identifier
          in: path
          required: true
          schema:
            type: string
          description: Nominee identifier
      responses:
        '200':
          description: Submissions for nominee
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Submission'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /submissions/user/{userId}:
    get:
      tags:
        - Submissions
      summary: Get submissions by user
      description: Get all submissions by a specific user (Admin only)
      operationId: getSubmissionsByUser
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Submissions by user
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Submission'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /submissions/{id}:
    get:
      tags:
        - Submissions
      summary: Get submission by ID
      description: Get submission details (Admin only)
      operationId: getSubmissionById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Submission details
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Submission'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Submissions
      summary: Update submission
      description: Update submission details (Admin only)
      operationId: updateSubmission
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSubmissionRequest'
      responses:
        '200':
          description: Submission updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Submission'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /submissions/{id}/approve:
    post:
      tags:
        - Submissions
      summary: Approve submission
      description: Approve a submission and optionally create a candidate (Admin/Organiser only)
      operationId: approveSubmission
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ApproveSubmissionRequest'
      responses:
        '200':
          description: Submission approved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          submission:
                            $ref: '#/components/schemas/Submission'
                          candidate:
                            $ref: '#/components/schemas/Candidate'
                            description: Created candidate (if create_candidate=true)
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /submissions/{id}/reject:
    post:
      tags:
        - Submissions
      summary: Reject submission
      description: Reject a submission with reason (Admin/Organiser only)
      operationId: rejectSubmission
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RejectSubmissionRequest'
      responses:
        '200':
          description: Submission rejected
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Submission'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /submissions/{id}/resolve-duplicate:
    post:
      tags:
        - Submissions
      summary: Resolve duplicate submission
      description: Resolve a duplicate submission by keeping, merging, or rejecting (Admin/Organiser only)
      operationId: resolveDuplicateSubmission
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ResolveDuplicateRequest'
      responses:
        '200':
          description: Duplicate resolved
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Submission'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /submissions/{id}/check-duplicates:
    post:
      tags:
        - Submissions
      summary: Check for duplicates
      description: Manually trigger duplicate check for a submission (Admin only)
      operationId: checkSubmissionDuplicates
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Duplicate check results
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          submission:
                            $ref: '#/components/schemas/Submission'
                          duplicates_found:
                            type: integer
                          matched_submissions:
                            type: array
                            items:
                              type: object
                              properties:
                                submission_id:
                                  $ref: '#/components/schemas/ObjectId'
                                similarity:
                                  type: number
                                matched_fields:
                                  type: array
                                  items:
                                    type: string
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ==================== Coupon Endpoints ====================

  /coupons:
    post:
      tags:
        - Coupons
      summary: Create a new coupon
      description: Create a discount coupon for an event (Admin/Organiser only)
      operationId: createCoupon
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCouponRequest'
      responses:
        '201':
          description: Coupon created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Coupon'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

    get:
      tags:
        - Coupons
      summary: List all coupons
      description: Get paginated list of coupons with filters (Admin only)
      operationId: listCoupons
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: event
          in: query
          schema:
            type: string
          description: Filter by event ID
        - name: status
          in: query
          schema:
            type: string
            enum: [active, inactive, expired]
        - name: discount_type
          in: query
          schema:
            type: string
            enum: [percentage, fixed]
      responses:
        '200':
          description: List of coupons
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Coupon'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /coupons/public:
    get:
      tags:
        - Coupons
      summary: Get public coupons
      description: Get publicly visible coupons (Public)
      operationId: getPublicCoupons
      parameters:
        - name: event
          in: query
          schema:
            type: string
          description: Filter by event ID
      responses:
        '200':
          description: List of public coupons
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Coupon'

  /coupons/code/{code}:
    get:
      tags:
        - Coupons
      summary: Get coupon by code
      description: Get coupon details by code (Public for display)
      operationId: getCouponByCode
      parameters:
        - name: code
          in: path
          required: true
          schema:
            type: string
          description: Coupon code
      responses:
        '200':
          description: Coupon details
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Coupon'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /coupons/validate:
    post:
      tags:
        - Coupons
      summary: Validate coupon
      description: Validate a coupon for a specific bundle (Public for checkout)
      operationId: validateCoupon
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ValidateCouponRequest'
      responses:
        '200':
          description: Coupon validation result
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          valid:
                            type: boolean
                          coupon:
                            $ref: '#/components/schemas/Coupon'
                          message:
                            type: string
        '400':
          $ref: '#/components/responses/ValidationError'

  /coupons/apply:
    post:
      tags:
        - Coupons
      summary: Apply coupon
      description: Apply coupon and calculate discount (Public for checkout)
      operationId: applyCoupon
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - code
                - bundle
                - amount
              properties:
                code:
                  type: string
                bundle:
                  $ref: '#/components/schemas/ObjectId'
                amount:
                  type: number
                  description: Purchase amount
      responses:
        '200':
          description: Coupon applied
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApplyCouponResponse'
        '400':
          $ref: '#/components/responses/ValidationError'

  /coupons/generate-code:
    post:
      tags:
        - Coupons
      summary: Generate unique coupon code
      description: Generate a unique coupon code (Admin/Organiser only)
      operationId: generateCouponCode
      security:
        - BearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                prefix:
                  type: string
                  description: Optional prefix for the code
                length:
                  type: integer
                  default: 8
                  description: Code length (excluding prefix)
      responses:
        '200':
          description: Generated code
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          code:
                            type: string
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /coupons/event/{eventId}:
    get:
      tags:
        - Coupons
      summary: Get coupons by event
      description: Get all coupons for an event (Admin only)
      operationId: getCouponsByEvent
      security:
        - BearerAuth: []
      parameters:
        - name: eventId
          in: path
          required: true
          schema:
            type: string
        - name: status
          in: query
          schema:
            type: string
            enum: [active, inactive, expired]
      responses:
        '200':
          description: Coupons for event
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Coupon'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /coupons/event/{eventId}/active:
    get:
      tags:
        - Coupons
      summary: Get active coupons for event
      description: Get active coupons for an event (Public)
      operationId: getActiveCouponsByEvent
      parameters:
        - name: eventId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Active coupons
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Coupon'

  /coupons/{id}:
    get:
      tags:
        - Coupons
      summary: Get coupon by ID
      description: Get coupon details (Admin only)
      operationId: getCouponById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Coupon details
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Coupon'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Coupons
      summary: Update coupon
      description: Update coupon details (Admin/Organiser only)
      operationId: updateCoupon
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCouponRequest'
      responses:
        '200':
          description: Coupon updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Coupon'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Coupons
      summary: Delete coupon
      description: Soft delete a coupon (Admin only)
      operationId: deleteCoupon
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Coupon deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /coupons/{id}/activate:
    put:
      tags:
        - Coupons
      summary: Activate coupon
      description: Activate an inactive coupon (Admin/Organiser only)
      operationId: activateCoupon
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Coupon activated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Coupon'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /coupons/{id}/deactivate:
    put:
      tags:
        - Coupons
      summary: Deactivate coupon
      description: Deactivate an active coupon (Admin/Organiser only)
      operationId: deactivateCoupon
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Coupon deactivated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Coupon'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /coupons/{id}/stats:
    get:
      tags:
        - Coupons
      summary: Get coupon statistics
      description: Get redemption statistics for a coupon (Admin only)
      operationId: getCouponStats
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Coupon statistics
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/CouponStats'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /coupons/{id}/user-redemptions:
    get:
      tags:
        - Coupons
      summary: Get user redemption count
      description: Get user's redemption count for a coupon
      operationId: getCouponUserRedemptions
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
        - name: userId
          in: query
          schema:
            type: string
          description: User ID (admin can query any user, users can query themselves)
      responses:
        '200':
          description: User redemption count
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          redemptions:
                            type: integer
                          remaining:
                            type: integer
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ==================== Slide Endpoints ====================

  /slides:
    post:
      tags:
        - Slides
      summary: Create a new slide
      description: Create a new hero/banner slide (Admin/Organiser only)
      operationId: createSlide
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSlideRequest'
      responses:
        '201':
          description: Slide created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Slide'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

    get:
      tags:
        - Slides
      summary: List all slides
      description: Get paginated list of slides with filters (Admin only)
      operationId: listSlides
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: slide_type
          in: query
          schema:
            type: string
            enum: [hero, banner, announcement, promotion]
        - name: status
          in: query
          schema:
            type: string
            enum: [active, inactive, draft, scheduled]
        - name: position
          in: query
          schema:
            type: string
            enum: [top, middle, bottom]
        - name: event
          in: query
          schema:
            type: string
          description: Filter by event ID
      responses:
        '200':
          description: List of slides
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Slide'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /slides/active:
    get:
      tags:
        - Slides
      summary: Get active slides
      description: Get published active slides (Public)
      operationId: getActiveSlides
      parameters:
        - name: slide_type
          in: query
          schema:
            type: string
            enum: [hero, banner, announcement, promotion]
        - name: position
          in: query
          schema:
            type: string
            enum: [top, middle, bottom]
      responses:
        '200':
          description: Active slides
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Slide'

  /slides/scheduled:
    get:
      tags:
        - Slides
      summary: Get scheduled slides
      description: Get slides within validity period (Public)
      operationId: getScheduledSlides
      responses:
        '200':
          description: Scheduled slides
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Slide'

  /slides/type/{type}:
    get:
      tags:
        - Slides
      summary: Get slides by type
      description: Get slides filtered by type (Public)
      operationId: getSlidesByType
      parameters:
        - name: type
          in: path
          required: true
          schema:
            type: string
            enum: [hero, banner, announcement, promotion]
      responses:
        '200':
          description: Slides by type
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Slide'

  /slides/position/{position}:
    get:
      tags:
        - Slides
      summary: Get slides by position
      description: Get slides filtered by position (Public)
      operationId: getSlidesByPosition
      parameters:
        - name: position
          in: path
          required: true
          schema:
            type: string
            enum: [top, middle, bottom]
      responses:
        '200':
          description: Slides by position
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Slide'

  /slides/event/{eventId}:
    get:
      tags:
        - Slides
      summary: Get slides by event
      description: Get slides for an event (Public)
      operationId: getSlidesByEvent
      parameters:
        - name: eventId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Slides for event
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Slide'

  /slides/reorder:
    put:
      tags:
        - Slides
      summary: Reorder slides
      description: Update slide display order (Admin/Organiser only)
      operationId: reorderSlides
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReorderSlidesRequest'
      responses:
        '200':
          description: Slides reordered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /slides/bulk/status:
    put:
      tags:
        - Slides
      summary: Bulk update slide status
      description: Update status for multiple slides (Admin only)
      operationId: bulkUpdateSlideStatus
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BulkUpdateSlideStatusRequest'
      responses:
        '200':
          description: Slides updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          updated:
                            type: integer
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /slides/{id}:
    get:
      tags:
        - Slides
      summary: Get slide by ID
      description: Get slide details (Admin only)
      operationId: getSlideById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Slide details
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Slide'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Slides
      summary: Update slide
      description: Update slide details (Admin/Organiser only)
      operationId: updateSlide
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSlideRequest'
      responses:
        '200':
          description: Slide updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Slide'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Slides
      summary: Delete slide
      description: Soft delete a slide (Admin only)
      operationId: deleteSlide
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Slide deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /slides/{id}/view:
    post:
      tags:
        - Slides
      summary: Increment view count
      description: Track slide view (Public analytics)
      operationId: incrementSlideViewCount
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: View recorded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /slides/{id}/click:
    post:
      tags:
        - Slides
      summary: Increment click count
      description: Track slide click (Public analytics)
      operationId: incrementSlideClickCount
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Click recorded
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'

  /slides/{id}/publish:
    put:
      tags:
        - Slides
      summary: Publish slide
      description: Publish a draft slide (Admin/Organiser only)
      operationId: publishSlide
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Slide published
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Slide'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /slides/{id}/unpublish:
    put:
      tags:
        - Slides
      summary: Unpublish slide
      description: Revert slide to draft (Admin/Organiser only)
      operationId: unpublishSlide
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Slide unpublished
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Slide'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /slides/{id}/archive:
    put:
      tags:
        - Slides
      summary: Archive slide
      description: Archive a slide (Admin only)
      operationId: archiveSlide
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Slide archived
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Slide'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /slides/{id}/toggle-active:
    put:
      tags:
        - Slides
      summary: Toggle slide active status
      description: Toggle active/inactive status (Admin/Organiser only)
      operationId: toggleSlideActive
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Status toggled
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Slide'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /slides/{id}/image:
    post:
      tags:
        - Slides
      summary: Upload slide image
      description: Upload or update slide image (Admin/Organiser only)
      operationId: uploadSlideImage
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - image
              properties:
                image:
                  type: string
                  format: binary
                alt:
                  type: string
                is_mobile:
                  type: boolean
                  description: Whether this is a mobile image
      responses:
        '200':
          description: Image uploaded
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Slide'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /slides/{id}/clone:
    post:
      tags:
        - Slides
      summary: Clone slide
      description: Create a copy of a slide (Admin/Organiser only)
      operationId: cloneSlide
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '201':
          description: Slide cloned
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Slide'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  # ==================== Notification Endpoints ====================

  /notifications:
    post:
      tags:
        - Notifications
      summary: Create a notification
      description: Create a notification for a user (Admin only)
      operationId: createNotification
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateNotificationRequest'
      responses:
        '201':
          description: Notification created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Notification'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

    get:
      tags:
        - Notifications
      summary: List all notifications
      description: Get paginated list of notifications (Admin only)
      operationId: listNotifications
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: user
          in: query
          schema:
            type: string
          description: Filter by user ID
        - name: type
          in: query
          schema:
            type: string
        - name: channel
          in: query
          schema:
            type: string
            enum: [in_app, email, sms, push, webhook]
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, sent, delivered, read, failed, cancelled]
        - name: priority
          in: query
          schema:
            type: string
            enum: [low, normal, high, urgent]
      responses:
        '200':
          description: List of notifications
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Notification'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /notifications/me:
    get:
      tags:
        - Notifications
      summary: Get my notifications
      description: Get current user's notifications
      operationId: getMyNotifications
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
        - name: type
          in: query
          schema:
            type: string
        - name: status
          in: query
          schema:
            type: string
            enum: [pending, sent, delivered, read]
      responses:
        '200':
          description: User's notifications
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Notification'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /notifications/me/unread:
    get:
      tags:
        - Notifications
      summary: Get unread notifications
      description: Get current user's unread notifications
      operationId: getUnreadNotifications
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Unread notifications
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Notification'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /notifications/me/unread/count:
    get:
      tags:
        - Notifications
      summary: Get unread count
      description: Get current user's unread notification count
      operationId: getUnreadNotificationCount
      security:
        - BearerAuth: []
      responses:
        '200':
          description: Unread count
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UnreadCountResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /notifications/me/read-all:
    put:
      tags:
        - Notifications
      summary: Mark all as read
      description: Mark all notifications as read for current user
      operationId: markAllNotificationsAsRead
      security:
        - BearerAuth: []
      responses:
        '200':
          description: All notifications marked as read
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          updated:
                            type: integer
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /notifications/me/type/{type}:
    get:
      tags:
        - Notifications
      summary: Get notifications by type
      description: Get current user's notifications filtered by type
      operationId: getNotificationsByType
      security:
        - BearerAuth: []
      parameters:
        - name: type
          in: path
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Notifications by type
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Notification'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /notifications/bulk:
    post:
      tags:
        - Notifications
      summary: Bulk create notifications
      description: Create notifications for multiple users (Admin only)
      operationId: bulkCreateNotifications
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BulkCreateNotificationRequest'
      responses:
        '201':
          description: Notifications created
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          created:
                            type: integer
                          notifications:
                            type: array
                            items:
                              $ref: '#/components/schemas/Notification'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /notifications/bulk/read:
    put:
      tags:
        - Notifications
      summary: Bulk mark as read
      description: Mark multiple notifications as read
      operationId: bulkMarkNotificationsAsRead
      security:
        - BearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BulkMarkAsReadRequest'
      responses:
        '200':
          description: Notifications marked as read
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          updated:
                            type: integer
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'

  /notifications/pending/{channel}:
    get:
      tags:
        - Notifications
      summary: Get pending notifications
      description: Get pending notifications for a channel (Admin only)
      operationId: getPendingNotifications
      security:
        - BearerAuth: []
      parameters:
        - name: channel
          in: path
          required: true
          schema:
            type: string
            enum: [in_app, email, sms, push, webhook]
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Pending notifications
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Notification'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /notifications/retry:
    get:
      tags:
        - Notifications
      summary: Get notifications for retry
      description: Get failed notifications ready for retry (Admin only)
      operationId: getNotificationsForRetry
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Notifications for retry
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Notification'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /notifications/channel/{channel}:
    get:
      tags:
        - Notifications
      summary: Get notifications by channel
      description: Get notifications filtered by channel (Admin only)
      operationId: getNotificationsByChannel
      security:
        - BearerAuth: []
      parameters:
        - name: channel
          in: path
          required: true
          schema:
            type: string
            enum: [in_app, email, sms, push, webhook]
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Notifications by channel
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Notification'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /notifications/event/{eventId}:
    get:
      tags:
        - Notifications
      summary: Get notifications by event
      description: Get notifications for an event (Admin/Organiser only)
      operationId: getNotificationsByEvent
      security:
        - BearerAuth: []
      parameters:
        - name: eventId
          in: path
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: Notifications for event
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Notification'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /notifications/user/{userId}:
    get:
      tags:
        - Notifications
      summary: Get notifications for user
      description: Get notifications for a specific user (Admin only)
      operationId: getNotificationsForUser
      security:
        - BearerAuth: []
      parameters:
        - name: userId
          in: path
          required: true
          schema:
            type: string
        - $ref: '#/components/parameters/PageParam'
        - $ref: '#/components/parameters/LimitParam'
      responses:
        '200':
          description: User's notifications
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        type: array
                        items:
                          $ref: '#/components/schemas/Notification'
                      meta:
                        $ref: '#/components/schemas/PaginationMeta'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'

  /notifications/{id}:
    get:
      tags:
        - Notifications
      summary: Get notification by ID
      description: Get notification details (Admin only)
      operationId: getNotificationById
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Notification details
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Notification'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    put:
      tags:
        - Notifications
      summary: Update notification
      description: Update notification details (Admin only)
      operationId: updateNotification
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateNotificationRequest'
      responses:
        '200':
          description: Notification updated
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Notification'
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

    delete:
      tags:
        - Notifications
      summary: Delete notification
      description: Soft delete a notification (Admin only)
      operationId: deleteNotification
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Notification deleted
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SuccessResponse'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /notifications/{id}/read:
    put:
      tags:
        - Notifications
      summary: Mark as read
      description: Mark a notification as read
      operationId: markNotificationAsRead
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Notification marked as read
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Notification'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /notifications/{id}/clicked:
    put:
      tags:
        - Notifications
      summary: Mark as clicked
      description: Mark a notification as clicked (tracks user engagement)
      operationId: markNotificationAsClicked
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Notification marked as clicked
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Notification'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /notifications/{id}/sent:
    put:
      tags:
        - Notifications
      summary: Mark as sent
      description: Mark notification as sent (Admin only - internal)
      operationId: markNotificationAsSent
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Notification marked as sent
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Notification'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /notifications/{id}/delivered:
    put:
      tags:
        - Notifications
      summary: Mark as delivered
      description: Mark notification as delivered (Admin only - internal)
      operationId: markNotificationAsDelivered
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Notification marked as delivered
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Notification'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /notifications/{id}/failed:
    put:
      tags:
        - Notifications
      summary: Mark as failed
      description: Mark notification as failed (Admin only - internal)
      operationId: markNotificationAsFailed
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                error:
                  type: string
                  description: Error message
      responses:
        '200':
          description: Notification marked as failed
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Notification'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'

  /notifications/{id}/queue:
    put:
      tags:
        - Notifications
      summary: Queue notification
      description: Queue notification for delivery (Admin only)
      operationId: queueNotification
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/IdParam'
      responses:
        '200':
          description: Notification queued
          content:
            application/json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/SuccessResponse'
                  - type: object
                    properties:
                      data:
                        $ref: '#/components/schemas/Notification'
        '401':
          $ref: '#/components/responses/UnauthorizedError'
        '403':
          $ref: '#/components/responses/ForbiddenError'
        '404':
          $ref: '#/components/responses/NotFoundError'
